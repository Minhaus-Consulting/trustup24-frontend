import{c as _,r as h,j as e,as as v,p as vs,b as Ke,s as M,g as t,N as d,O as x,a6 as bs,P as l,h as I,Y as ys,a8 as ws,S as H,d as G,B as n,V as y,W as As,e as O,I as q,f as u,i as R,Z as Cs,au as ks,av as Ss,aw as Ts,ax as Ms,ay as $,az as Rs,a1 as We,R as Ps,D as Ye,k as Je,l as Qe,n as Ze,o as Xe,aA as es,J as f,a3 as Es,a7 as Fs}from"./index-48Pj72Q3.js";import{T as zs,a as Ls,b as w,c as A}from"./tabs-DDUjb8uk.js";import{A as Bs,a as _s}from"./alert-rJ2S_Nf7.js";import{D as Ds}from"./download-BsM3dSQ9.js";import{F as ss}from"./filter-Cnk_opva.js";import{E as U}from"./eye-DVDctZHC.js";import{C as B}from"./circle-x-FP22CJty.js";import{P as Is}from"./phone-DHq57xBw.js";import{E as Hs}from"./ellipsis-vertical-CTJl5RKN.js";import{S as Gs}from"./square-pen-HsYnCjq5.js";import{R as V}from"./refresh-cw-xKOSqyVu.js";import{S as Os}from"./save-BUVjkkhT.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=_("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=_("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=_("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=_("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),K=h.forwardRef(({className:r,...m},c)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:c,className:v("w-full caption-bottom text-sm",r),...m})}));K.displayName="Table";const W=h.forwardRef(({className:r,...m},c)=>e.jsx("thead",{ref:c,className:v("[&_tr]:border-b",r),...m}));W.displayName="TableHeader";const Y=h.forwardRef(({className:r,...m},c)=>e.jsx("tbody",{ref:c,className:v("[&_tr:last-child]:border-0",r),...m}));Y.displayName="TableBody";const Us=h.forwardRef(({className:r,...m},c)=>e.jsx("tfoot",{ref:c,className:v("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...m}));Us.displayName="TableFooter";const P=h.forwardRef(({className:r,...m},c)=>e.jsx("tr",{ref:c,className:v("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...m}));P.displayName="TableRow";const g=h.forwardRef(({className:r,...m},c)=>e.jsx("th",{ref:c,className:v("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...m}));g.displayName="TableHead";const N=h.forwardRef(({className:r,...m},c)=>e.jsx("td",{ref:c,className:v("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...m}));N.displayName="TableCell";const Vs=h.forwardRef(({className:r,...m},c)=>e.jsx("caption",{ref:c,className:v("mt-4 text-sm text-muted-foreground",r),...m}));Vs.displayName="TableCaption";function ia(){var te,ne,re,ie,le,ce,de,oe,me,xe,he,je,ue,ge,Ne,pe,fe,ve,be,ye,we,Ae,Ce,ke,Se,Te,Me,Re,Pe,Ee,Fe,ze,Le,Be,_e,De,Ie,He,Ge,Oe,qe,$e,Ue,Ve;const{toast:r}=vs(),[m,c]=h.useState("overview"),[C,J]=h.useState(""),[o,k]=h.useState(null),[p,E]=h.useState(null),[Ks,ns]=h.useState(null),[Q,Z]=h.useState(0),[D,rs]=h.useState(null),[is,X]=h.useState(!1),{data:a,isLoading:ls,error:cs,refetch:ee}=Ke({queryKey:["admin","providers","pipeline",{category:null,search:C}],queryFn:async()=>{const s=new URLSearchParams;C&&s.append("search",C);const i=await f("GET",`/api/admin/providers/pipeline?${s}`);if(!i.ok)throw new Error("Failed to fetch pipeline data");return i.json()},refetchInterval:3e4}),{data:F,isLoading:ds}=Ke({queryKey:["admin","providers","categories"],queryFn:async()=>{const s=await f("GET","/api/admin/providers/categories");if(!s.ok)throw new Error("Failed to fetch category stats");return s.json()},refetchInterval:6e4}),z=M({mutationFn:async({id:s,status:i,notes:j,rejectionReason:T})=>{const L=await f("PUT",`/api/admin/providers/${s}/status`,{status:i,notes:j,rejectionReason:T});if(!L.ok)throw new Error("Failed to update provider status");return L.json()},onSuccess:()=>{ee(),r({title:"Provider Status Updated",description:"The provider status has been successfully updated."})},onError:s=>{r({title:"Error",description:"Failed to update provider status. Please try again.",variant:"destructive"})}}),os=s=>({company_formation:"blue",insurance_broker:"green",legal_services:"purple",relocation_services:"orange",pro_services:"yellow",financial_services:"indigo"})[s]||"gray",S=s=>({company_formation:"FirmengrÃ¼ndung",insurance_broker:"Versicherung",legal_services:"Rechtsberatung",relocation_services:"Relocation",pro_services:"Pro Services",financial_services:"Financial"})[s]||s,ms=s=>({company_formation:as,insurance_broker:H,legal_services:qs,relocation_services:$s,pro_services:Es,financial_services:Fs})[s]||as,b={totalAgencies:47,pendingApprovals:8,activeUsers:1234,monthlyLeads:89,pendingClaims:3,pendingReviews:12},xs=[{id:"1",agencyName:"Dubai Business Solutions",email:"info@dubaibs.ae",phone:"+971 50 123 4567",licenseType:"premium",status:"pending",createdAt:"2025-01-06",companyDetails:{licenseNumber:"DED-98765",establishedYear:2020,employeeCount:"11-25",address:"Business Bay, Dubai"}},{id:"2",agencyName:"Emirates Setup Consultants",email:"contact@emiratessetup.com",phone:"+971 55 987 6543",licenseType:"basic",status:"pending",createdAt:"2025-01-05"}],hs=[{id:"1",agencyId:"123",agencyName:"Creative City Advisors",contactName:"Sarah Meyer",email:"s.meyer@ccadvisors.ae",phone:"+971 50 555 1234",role:"Managing Director",message:"Ich bin die GeschÃ¤ftsfÃ¼hrerin. LinkedIn: linkedin.com/in/sarah-meyer-dubai",status:"pending",createdAt:"2025-01-06"}],js=[{id:"1",agencyId:"456",agencyName:"Setup.ae",userName:"Michael Schmidt",rating:5,content:"Hervorragende Beratung, sehr professionell!",status:"pending",createdAt:"2025-01-06"},{id:"2",agencyId:"789",agencyName:"Business Link UAE",userName:"Anna Weber",rating:2,content:"Schlechte Kommunikation, lange Wartezeiten.",status:"pending",createdAt:"2025-01-05"}],se=M({mutationFn:async s=>await(await f("POST",`/api/admin/agencies/${s}/approve`)).json(),onSuccess:()=>{r({title:"Agentur freigegeben",description:"Die Agentur wurde erfolgreich freigegeben."}),k(null)}}),us=M({mutationFn:async({agencyId:s,reason:i})=>await(await f("POST",`/api/admin/agencies/${s}/reject`,{reason:i})).json(),onSuccess:()=>{r({title:"Agentur abgelehnt",description:"Die Ablehnung wurde versendet."}),k(null)}}),gs=M({mutationFn:async s=>await(await f("POST",`/api/admin/claims/${s}/approve`)).json(),onSuccess:()=>{r({title:"Claim genehmigt",description:"Der Anspruch wurde bestÃ¤tigt."}),E(null)}}),Ns=M({mutationFn:async s=>await(await f("POST",`/api/admin/reviews/${s}/approve`)).json(),onSuccess:()=>{r({title:"Bewertung freigegeben",description:"Die Bewertung ist jetzt Ã¶ffentlich sichtbar."}),ns(null)}}),ae=async s=>{X(!0);try{const j=(await f(`/api/agencies/${s}/mandates`)).data;rs(j),Z(j.historicalApprovedMandates||0)}catch(i){console.error("Error fetching mandate data:",i),r({title:"Fehler",description:"Mandate konnten nicht geladen werden.",variant:"destructive"})}finally{X(!1)}},ps=async s=>{try{await f(`/api/agencies/${s}/historical-mandates`,{method:"PUT",body:JSON.stringify({historicalMandates:Q})}),r({title:"Erfolg",description:"Historische Mandate wurden erfolgreich aktualisiert."}),await ae(s)}catch(i){console.error("Error updating mandates:",i),r({title:"Fehler",description:"Fehler beim Aktualisieren der Mandate.",variant:"destructive"})}},fs=async s=>{try{await f(`/api/agencies/${s}/recalculate-score`,{method:"POST"}),r({title:"Erfolg",description:"Trust Score wurde neu berechnet."})}catch(i){console.error("Error recalculating trust score:",i),r({title:"Fehler",description:"Fehler beim Neuberechnen des Trust Scores.",variant:"destructive"})}};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Verwalten Sie Agenturen, Bewertungen und Anfragen"})]}),e.jsxs(zs,{value:m,onValueChange:c,children:[e.jsxs(Ls,{className:"grid w-full grid-cols-6",children:[e.jsx(w,{value:"overview",children:"Ãœbersicht"}),e.jsx(w,{value:"provider-pipeline",children:"ðŸ­ Provider Pipeline"}),e.jsx(w,{value:"agencies",children:"Agenturen"}),e.jsx(w,{value:"claims",children:"Claims"}),e.jsx(w,{value:"reviews",children:"Bewertungen"}),e.jsx(w,{value:"settings",children:"Einstellungen"})]}),e.jsxs(A,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(t,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Aktive Agenturen"}),e.jsx(bs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.totalAgencies}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% seit letztem Monat"})]})]}),e.jsxs(t,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Ausstehende Genehmigungen"}),e.jsx(I,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:b.pendingApprovals}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Agenturen warten auf Freigabe"})]})]}),e.jsxs(t,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Aktive Nutzer"}),e.jsx(ys,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.activeUsers}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Registrierte Unternehmer"})]})]}),e.jsxs(t,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Monatliche Leads"}),e.jsx(ws,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.monthlyLeads}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Generierte Anfragen"})]})]}),e.jsxs(t,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Offene Claims"}),e.jsx(H,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b.pendingClaims}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Agenturen beanspruchen Profile"})]})]}),e.jsxs(t,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Neue Bewertungen"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:b.pendingReviews}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Warten auf PrÃ¼fung"})]})]})]}),e.jsxs(t,{children:[e.jsx(d,{children:e.jsx(x,{children:"Schnellaktionen"})}),e.jsxs(l,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(n,{onClick:()=>c("agencies"),variant:"outline",className:"justify-start",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Agenturen prÃ¼fen"]}),e.jsxs(n,{onClick:()=>c("claims"),variant:"outline",className:"justify-start",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Claims bearbeiten"]}),e.jsxs(n,{onClick:()=>c("reviews"),variant:"outline",className:"justify-start",children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Bewertungen prÃ¼fen"]}),e.jsx(Link,{href:"/admin-bereich/mandate",children:e.jsxs(n,{variant:"outline",className:"justify-start w-full",children:[e.jsx(As,{className:"mr-2 h-4 w-4"}),"Mandate verwalten"]})}),e.jsxs(n,{variant:"outline",className:"justify-start",children:[e.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Report exportieren"]})]})]})]}),e.jsxs(A,{value:"provider-pipeline",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Provider Pipeline"}),e.jsx("p",{className:"text-muted-foreground",children:"Kanban-Board fÃ¼r Provider-Management nach Kategorien"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(q,{placeholder:"Provider suchen...",className:"pl-8 w-64",value:C,onChange:s=>J(s.target.value)})]}),e.jsxs(n,{variant:"outline",children:[e.jsx(ss,{className:"mr-2 h-4 w-4"}),"Filter"]})]})]}),ds?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[...Array(6)].map((s,i)=>e.jsx(t,{className:"animate-pulse",children:e.jsx(d,{className:"pb-3",children:e.jsx("div",{className:"h-6 bg-gray-200 rounded"})})},i))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:(F==null?void 0:F.data)&&Object.entries(F.data).map(([s,i])=>{const j=os(s),T=ms(s),L=S(s);return e.jsx(t,{className:`border-${j}-200 bg-${j}-50`,children:e.jsx(d,{className:"pb-3",children:e.jsxs(x,{className:"text-sm flex items-center",children:[e.jsx(T,{className:`mr-2 h-4 w-4 text-${j}-600`}),L," (",i,")"]})})},s)})}),ls?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6 min-h-[600px]",children:[...Array(5)].map((s,i)=>e.jsxs(t,{className:"col-span-1 animate-pulse",children:[e.jsx(d,{className:"pb-3",children:e.jsx("div",{className:"h-6 bg-gray-200 rounded"})}),e.jsx(l,{className:"space-y-3",children:[...Array(3)].map((j,T)=>e.jsx("div",{className:"h-20 bg-gray-100 rounded"},T))})]},i))}):cs?e.jsxs("div",{className:"text-center text-red-600 py-8",children:[e.jsx("p",{children:"Failed to load pipeline data. Please try again."}),e.jsx(n,{onClick:()=>ee(),className:"mt-2",children:"Retry"})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6 min-h-[600px]",children:[e.jsxs(t,{className:"col-span-1",children:[e.jsx(d,{className:"pb-3",children:e.jsxs(x,{className:"text-sm flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(I,{className:"mr-2 h-4 w-4 text-gray-600"}),"Incoming (",((ne=(te=a==null?void 0:a.data)==null?void 0:te.incoming)==null?void 0:ne.length)||0,")"]}),e.jsx(u,{variant:"secondary",children:((ie=(re=a==null?void 0:a.data)==null?void 0:re.incoming)==null?void 0:ie.length)||0})]})}),e.jsx(l,{className:"space-y-3",children:((ce=(le=a==null?void 0:a.data)==null?void 0:le.incoming)==null?void 0:ce.map(s=>e.jsx(t,{className:"p-3 border-l-4 border-l-blue-500 cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.agencyName}),e.jsx(u,{variant:"outline",className:"text-xs",children:S(s.providerCategory||"other")})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.email}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(R,{className:"mr-1 h-3 w-3"}),new Date(s.createdAt).toLocaleDateString("de-DE")]}),e.jsx("div",{className:"flex gap-1 mt-2",children:e.jsxs(n,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs",onClick:()=>z.mutate({id:s.id,status:"review"}),children:[e.jsx(U,{className:"mr-1 h-3 w-3"}),"Review"]})})]})},s.id)))||e.jsx("div",{className:"text-center text-gray-500 py-4",children:e.jsx("p",{className:"text-sm",children:"No incoming providers"})})})]}),e.jsxs(t,{className:"col-span-1",children:[e.jsx(d,{className:"pb-3",children:e.jsxs(x,{className:"text-sm flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(O,{className:"mr-2 h-4 w-4 text-orange-600"}),"Review (",((oe=(de=a==null?void 0:a.data)==null?void 0:de.review)==null?void 0:oe.length)||0,")"]}),e.jsx(u,{variant:"secondary",children:((xe=(me=a==null?void 0:a.data)==null?void 0:me.review)==null?void 0:xe.length)||0})]})}),e.jsx(l,{className:"space-y-3",children:((je=(he=a==null?void 0:a.data)==null?void 0:he.review)==null?void 0:je.map(s=>e.jsx(t,{className:"p-3 border-l-4 border-l-orange-500 cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.agencyName}),e.jsx(u,{variant:"outline",className:"text-xs",children:S(s.providerCategory||"other")})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.email}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(R,{className:"mr-1 h-3 w-3"}),new Date(s.updatedAt).toLocaleDateString("de-DE")]}),e.jsxs("div",{className:"flex gap-1 mt-2",children:[e.jsxs(n,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs",onClick:()=>z.mutate({id:s.id,status:"approved"}),children:[e.jsx(y,{className:"mr-1 h-3 w-3"}),"Approve"]}),e.jsxs(n,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs",onClick:()=>z.mutate({id:s.id,status:"rejected",rejectionReason:"Needs more documentation"}),children:[e.jsx(B,{className:"mr-1 h-3 w-3"}),"Reject"]})]})]})},s.id)))||e.jsx("div",{className:"text-center text-gray-500 py-4",children:e.jsx("p",{className:"text-sm",children:"No providers in review"})})})]}),e.jsxs(t,{className:"col-span-1",children:[e.jsx(d,{className:"pb-3",children:e.jsxs(x,{className:"text-sm flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(y,{className:"mr-2 h-4 w-4 text-green-600"}),"Approved (",((ge=(ue=a==null?void 0:a.data)==null?void 0:ue.approved)==null?void 0:ge.length)||0,")"]}),e.jsx(u,{variant:"secondary",children:((pe=(Ne=a==null?void 0:a.data)==null?void 0:Ne.approved)==null?void 0:pe.length)||0})]})}),e.jsx(l,{className:"space-y-3",children:((ve=(fe=a==null?void 0:a.data)==null?void 0:fe.approved)==null?void 0:ve.map(s=>e.jsx(t,{className:"p-3 border-l-4 border-l-green-500 cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.agencyName}),e.jsx(u,{variant:"outline",className:"text-xs",children:S(s.providerCategory||"other")})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.email}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(R,{className:"mr-1 h-3 w-3"}),new Date(s.updatedAt).toLocaleDateString("de-DE")]}),e.jsx("div",{className:"flex gap-1 mt-2",children:e.jsxs(n,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs",onClick:()=>z.mutate({id:s.id,status:"onboarding"}),children:[e.jsx(ts,{className:"mr-1 h-3 w-3"}),"Onboard"]})})]})},s.id)))||e.jsx("div",{className:"text-center text-gray-500 py-4",children:e.jsx("p",{className:"text-sm",children:"No approved providers"})})})]}),e.jsxs(t,{className:"col-span-1",children:[e.jsx(d,{className:"pb-3",children:e.jsxs(x,{className:"text-sm flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(B,{className:"mr-2 h-4 w-4 text-red-600"}),"Rejected (",((ye=(be=a==null?void 0:a.data)==null?void 0:be.rejected)==null?void 0:ye.length)||0,")"]}),e.jsx(u,{variant:"secondary",children:((Ae=(we=a==null?void 0:a.data)==null?void 0:we.rejected)==null?void 0:Ae.length)||0})]})}),e.jsx(l,{className:"space-y-3",children:((ke=(Ce=a==null?void 0:a.data)==null?void 0:Ce.rejected)==null?void 0:ke.map(s=>e.jsx(t,{className:"p-3 border-l-4 border-l-red-500 cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.agencyName}),e.jsx(u,{variant:"destructive",className:"text-xs",children:"Rejected"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.email}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(R,{className:"mr-1 h-3 w-3"}),new Date(s.updatedAt).toLocaleDateString("de-DE")]}),e.jsx("div",{className:"flex gap-1 mt-2",children:e.jsxs(n,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs",children:[e.jsx(U,{className:"mr-1 h-3 w-3"}),"Reason"]})})]})},s.id)))||e.jsx("div",{className:"text-center text-gray-500 py-4",children:e.jsx("p",{className:"text-sm",children:"No rejected providers"})})})]}),e.jsxs(t,{className:"col-span-1",children:[e.jsx(d,{className:"pb-3",children:e.jsxs(x,{className:"text-sm flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ts,{className:"mr-2 h-4 w-4 text-blue-600"}),"Onboarding (",((Te=(Se=a==null?void 0:a.data)==null?void 0:Se.onboarding)==null?void 0:Te.length)||0,")"]}),e.jsx(u,{variant:"secondary",children:((Re=(Me=a==null?void 0:a.data)==null?void 0:Me.onboarding)==null?void 0:Re.length)||0})]})}),e.jsx(l,{className:"space-y-3",children:((Ee=(Pe=a==null?void 0:a.data)==null?void 0:Pe.onboarding)==null?void 0:Ee.map(s=>e.jsx(t,{className:"p-3 border-l-4 border-l-blue-500 cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.agencyName}),e.jsx(u,{variant:"outline",className:"text-xs",children:S(s.providerCategory||"other")})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.email}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(R,{className:"mr-1 h-3 w-3"}),"Onboarding seit ",new Date(s.updatedAt).toLocaleDateString("de-DE")]}),e.jsx("div",{className:"flex gap-1 mt-2",children:e.jsxs(n,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs",children:[e.jsx(y,{className:"mr-1 h-3 w-3"}),"Complete"]})})]})},s.id)))||e.jsx("div",{className:"text-center text-gray-500 py-4",children:e.jsx("p",{className:"text-sm",children:"No providers in onboarding"})})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mt-6",children:[e.jsx(t,{children:e.jsxs(l,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Conversion Rate"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[((ze=(Fe=a==null?void 0:a.data)==null?void 0:Fe.stats)==null?void 0:ze.conversionRate)||0,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Incoming â†’ Approved"})]})}),e.jsx(t,{children:e.jsxs(l,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg. Review Time"}),e.jsxs("div",{className:"text-2xl font-bold",children:[((Be=(Le=a==null?void 0:a.data)==null?void 0:Le.stats)==null?void 0:Be.averageReviewTime)||0,"d"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Days in review"})]})}),e.jsx(t,{children:e.jsxs(l,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Pipeline"}),e.jsx("div",{className:"text-2xl font-bold",children:((De=(_e=a==null?void 0:a.data)==null?void 0:_e.stats)==null?void 0:De.totalProviders)||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Active providers"})]})}),e.jsx(t,{children:e.jsxs(l,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Incoming"}),e.jsxs("div",{className:"text-2xl font-bold",children:["+",((He=(Ie=a==null?void 0:a.data)==null?void 0:Ie.incoming)==null?void 0:He.length)||0]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"New applications"})]})}),e.jsx(t,{children:e.jsxs(l,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Rejection Rate"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[((Oe=(Ge=a==null?void 0:a.data)==null?void 0:Ge.stats)==null?void 0:Oe.totalProviders)>0?Math.round(((($e=(qe=a==null?void 0:a.data)==null?void 0:qe.rejected)==null?void 0:$e.length)||0)/((Ve=(Ue=a==null?void 0:a.data)==null?void 0:Ue.stats)==null?void 0:Ve.totalProviders)*100):0,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Quality maintained"})]})})]})]}),e.jsxs(A,{value:"agencies",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Ausstehende Agenturen"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(q,{placeholder:"Suche...",className:"pl-8 w-64",value:C,onChange:s=>J(s.target.value)})]}),e.jsxs(n,{variant:"outline",children:[e.jsx(ss,{className:"mr-2 h-4 w-4"}),"Filter"]})]})]}),e.jsx(t,{children:e.jsxs(K,{children:[e.jsx(W,{children:e.jsxs(P,{children:[e.jsx(g,{children:"Agentur"}),e.jsx(g,{children:"Kontakt"}),e.jsx(g,{children:"Lizenztyp"}),e.jsx(g,{children:"Datum"}),e.jsx(g,{children:"Status"}),e.jsx(g,{className:"text-right",children:"Aktionen"})]})}),e.jsx(Y,{children:xs.map(s=>e.jsxs(P,{children:[e.jsx(N,{className:"font-medium",children:s.agencyName}),e.jsx(N,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Cs,{className:"h-3 w-3"}),s.email]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Is,{className:"h-3 w-3"}),s.phone]})]})}),e.jsx(N,{children:e.jsx(u,{variant:s.licenseType==="premium"?"default":"secondary",children:s.licenseType})}),e.jsx(N,{children:s.createdAt}),e.jsx(N,{children:e.jsxs(u,{variant:"outline",className:"bg-yellow-50",children:[e.jsx(I,{className:"mr-1 h-3 w-3"}),"Ausstehend"]})}),e.jsx(N,{className:"text-right",children:e.jsxs(ks,{children:[e.jsx(Ss,{asChild:!0,children:e.jsx(n,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(Hs,{className:"h-4 w-4"})})}),e.jsxs(Ts,{align:"end",children:[e.jsx(Ms,{children:"Aktionen"}),e.jsxs($,{onClick:()=>k(s),children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Details anzeigen"]}),e.jsx(Rs,{}),e.jsxs($,{onClick:()=>se.mutate(s.id),className:"text-green-600",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Genehmigen"]}),e.jsxs($,{className:"text-red-600",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Ablehnen"]})]})]})})]},s.id))})]})})]}),e.jsxs(A,{value:"claims",className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h2",{className:"text-2xl font-semibold",children:"Claim-Anfragen"})}),e.jsx(t,{children:e.jsxs(K,{children:[e.jsx(W,{children:e.jsxs(P,{children:[e.jsx(g,{children:"Agentur"}),e.jsx(g,{children:"Antragsteller"}),e.jsx(g,{children:"Position"}),e.jsx(g,{children:"Nachricht"}),e.jsx(g,{children:"Datum"}),e.jsx(g,{className:"text-right",children:"Aktionen"})]})}),e.jsx(Y,{children:hs.map(s=>e.jsxs(P,{children:[e.jsx(N,{className:"font-medium",children:s.agencyName}),e.jsx(N,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:s.contactName}),e.jsx("div",{className:"text-muted-foreground",children:s.email})]})}),e.jsx(N,{children:s.role}),e.jsx(N,{className:"max-w-xs truncate",children:s.message}),e.jsx(N,{children:s.createdAt}),e.jsx(N,{className:"text-right",children:e.jsx(n,{size:"sm",variant:"outline",onClick:()=>E(s),children:"PrÃ¼fen"})})]},s.id))})]})})]}),e.jsxs(A,{value:"reviews",className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h2",{className:"text-2xl font-semibold",children:"Ausstehende Bewertungen"})}),e.jsx("div",{className:"grid gap-4",children:js.map(s=>e.jsxs(t,{children:[e.jsx(d,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(x,{className:"text-lg",children:s.agencyName}),e.jsxs(We,{children:["Von ",s.userName," â€¢ ",s.createdAt]})]}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((i,j)=>e.jsx(G,{className:`h-4 w-4 ${j<s.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},j))})]})}),e.jsxs(l,{children:[e.jsx("p",{className:"text-sm mb-4",children:s.content}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{size:"sm",onClick:()=>Ns.mutate(s.id),children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Genehmigen"]}),e.jsxs(n,{size:"sm",variant:"destructive",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Ablehnen"]}),e.jsxs(n,{size:"sm",variant:"outline",children:[e.jsx(Gs,{className:"mr-2 h-4 w-4"}),"Bearbeiten"]})]})]})]},s.id))})]}),e.jsx(A,{value:"settings",className:"space-y-6",children:e.jsxs(t,{children:[e.jsxs(d,{children:[e.jsx(x,{children:"Admin-Einstellungen"}),e.jsx(We,{children:"Verwalten Sie die Plattform-Einstellungen"})]}),e.jsx(l,{className:"space-y-4",children:e.jsxs(Bs,{children:[e.jsx(Ps,{className:"h-4 w-4"}),e.jsx(_s,{children:"Einstellungen-Bereich wird in KÃ¼rze implementiert."})]})})]})})]}),e.jsx(Ye,{open:!!o,onOpenChange:()=>k(null),children:e.jsxs(Je,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Ze,{children:"Agentur-Details"}),e.jsx(Xe,{children:"PrÃ¼fen Sie die Angaben der Agentur vor der Freigabe"})]}),o&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Firmenname"}),e.jsx("p",{children:o.agencyName})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Lizenztyp"}),e.jsx(u,{children:o.licenseType})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"E-Mail"}),e.jsx("p",{children:o.email})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Telefon"}),e.jsx("p",{children:o.phone})]})]}),o.companyDetails&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Firmendetails"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Lizenznummer:"}),e.jsx("p",{children:o.companyDetails.licenseNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"GrÃ¼ndungsjahr:"}),e.jsx("p",{children:o.companyDetails.establishedYear||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Mitarbeiter:"}),e.jsx("p",{children:o.companyDetails.employeeCount||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Adresse:"}),e.jsx("p",{children:o.companyDetails.address||"N/A"})]})]})]})}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Mandate Management"}),is?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(V,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Lade Mandate..."})]}):D?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(t,{className:"border",children:[e.jsx(d,{className:"pb-3 pt-3",children:e.jsx(x,{className:"text-sm font-medium",children:"Total Mandate"})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:D.totalMandates}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Historisch + Plattform"})]})]}),e.jsxs(t,{className:"border",children:[e.jsx(d,{className:"pb-3 pt-3",children:e.jsx(x,{className:"text-sm font-medium",children:"Letzte Aktualisierung"})}),e.jsx(l,{children:e.jsx("div",{className:"text-sm",children:new Date(D.lastUpdated).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Label,{htmlFor:"historical-mandates",children:"Historische genehmigte Mandate"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{id:"historical-mandates",type:"number",min:"0",value:Q,onChange:s=>Z(parseInt(s.target.value)||0),className:"max-w-[150px]"}),e.jsxs(n,{size:"sm",onClick:()=>ps(o.id),children:[e.jsx(Os,{className:"mr-2 h-4 w-4"}),"Speichern"]}),e.jsxs(n,{size:"sm",variant:"outline",onClick:()=>fs(o.id),children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Trust Score berechnen"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'Mandate flieÃŸen in die "Substanz & Erfahrung"-Kategorie (20%) des Trust Scores ein'})]})]}):e.jsxs(n,{onClick:()=>ae(o.id),variant:"outline",size:"sm",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Mandate laden"]})]})]}),e.jsxs(es,{children:[e.jsx(n,{variant:"outline",onClick:()=>k(null),children:"Abbrechen"}),e.jsx(n,{variant:"destructive",onClick:()=>{o&&us.mutate({agencyId:o.id,reason:"UnvollstÃ¤ndige Angaben"})},children:"Ablehnen"}),e.jsx(n,{onClick:()=>{o&&se.mutate(o.id)},children:"Genehmigen"})]})]})}),e.jsx(Ye,{open:!!p,onOpenChange:()=>E(null),children:e.jsxs(Je,{children:[e.jsxs(Qe,{children:[e.jsx(Ze,{children:"Claim-Anfrage prÃ¼fen"}),e.jsx(Xe,{children:"ÃœberprÃ¼fen Sie die Angaben der Claim-Anfrage bevor Sie diese genehmigen oder ablehnen."})]}),p&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Agentur"}),e.jsx("p",{children:p.agencyName})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Antragsteller"}),e.jsxs("p",{children:[p.contactName," (",p.role,")"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:p.email}),e.jsx("p",{className:"text-sm text-muted-foreground",children:p.phone})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Nachricht"}),e.jsx("p",{className:"text-sm",children:p.message})]})]}),e.jsxs(es,{children:[e.jsx(n,{variant:"outline",onClick:()=>E(null),children:"Abbrechen"}),e.jsx(n,{variant:"destructive",children:"Ablehnen"}),e.jsx(n,{onClick:()=>{p&&gs.mutate(p.id)},children:"Genehmigen"})]})]})})]})}export{ia as default};
