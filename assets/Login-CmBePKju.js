import{aa as T,p as K,r as x,j as e,g as u,N as p,U as C,O as g,a1 as j,P as w,S as b,a8 as v,Y as y,B as i,ab as S,a6 as k,ac as I,a9 as N,I as f}from"./index-wr2dCn2t.js";import{A as z}from"./arrow-left-4R3_-r3u.js";function R(){const[,l]=T(),{toast:m}=K(),[A,c]=x.useState(!1),[a,d]=x.useState(null),[n,L]=x.useState(!1),[r,o]=x.useState({email:"",password:"",name:"",phone:""}),F=async s=>{s.preventDefault(),c(!0);try{const h=await fetch("/api/auth/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.email,password:r.password})}),t=await h.json();h.ok&&t.success?(m({title:"Login erfolgreich",description:"Sie werden zum Dashboard weitergeleitet..."}),localStorage.setItem("user",JSON.stringify(t.user)),sessionStorage.setItem("userRole",t.user.role),sessionStorage.setItem("userId",t.user.id),console.log("ðŸ”— Redirecting to:",t.redirectUrl),console.log("ðŸ”— User role:",t.user.role),l(t.redirectUrl),setTimeout(()=>{window.location.pathname!==t.redirectUrl&&(console.log("ðŸ”— Fallback navigation triggered"),window.location.href=t.redirectUrl)},500)):m({title:"Login fehlgeschlagen",description:t.error||"UngÃ¼ltige Anmeldedaten",variant:"destructive"})}catch(h){console.error("Login error:",h),m({title:"Fehler",description:"Verbindungsfehler zum Server",variant:"destructive"})}finally{c(!1)}},U=async s=>{s.preventDefault(),c(!0),setTimeout(()=>{m({title:"Registrierung erfolgreich",description:"Ihr Konto wurde erstellt..."}),l(a==="provider"?"/anbieter-registrierung":a==="admin"?"/admin-bereich":"/benutzerbereich"),c(!1)},1e3)};return a?e.jsx("div",{className:"min-h-screen bg-gray-50 pt-16 sm:pt-20",children:e.jsxs("div",{className:"max-w-md mx-auto px-3 sm:px-4 py-6 sm:py-12 md:py-16",children:[e.jsxs(i,{variant:"ghost",onClick:()=>d(null),className:"mb-4 sm:mb-6",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"ZurÃ¼ck zur Auswahl"]}),e.jsxs(u,{children:[e.jsxs(p,{className:"text-center p-4 sm:p-6",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-4",children:a==="provider"?e.jsx(k,{className:"w-8 h-8 text-primary"}):a==="admin"?e.jsx(I,{className:"w-8 h-8 text-red-600"}):e.jsx(C,{className:"w-8 h-8 text-primary"})}),e.jsx(g,{children:a==="provider"?"Anbieter-Login":a==="admin"?"Admin-Login":"Kunden-Login"}),e.jsx(j,{children:n?"Erstellen Sie Ihr Konto":"Melden Sie sich in Ihrem Konto an"})]}),e.jsx(w,{children:e.jsxs("form",{onSubmit:n?U:F,className:"space-y-4",children:[n&&e.jsxs("div",{children:[e.jsx(N,{htmlFor:"name",children:"Name"}),e.jsx(f,{id:"name",type:"text",placeholder:a==="provider"?"Firmenname":"Ihr Name",value:r.name,onChange:s=>o({...r,name:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"email",children:"E-Mail"}),e.jsx(f,{id:"email",type:"email",placeholder:"ihre@email.de",value:r.email,onChange:s=>o({...r,email:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"password",children:"Passwort"}),e.jsx(f,{id:"password",type:"password",value:r.password,onChange:s=>o({...r,password:s.target.value}),required:!0})]}),n&&e.jsxs("div",{children:[e.jsx(N,{htmlFor:"phone",children:"Telefon (optional)"}),e.jsx(f,{id:"phone",type:"tel",placeholder:"+49...",value:r.phone,onChange:s=>o({...r,phone:s.target.value})})]}),e.jsx(i,{type:"submit",className:"w-full",disabled:A,children:A?"Verarbeite...":n?"Konto erstellen":"Anmelden"}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{type:"button",onClick:()=>L(!n),className:"text-sm text-primary hover:underline",children:n?"Bereits registriert? Jetzt anmelden":"Noch kein Konto? Jetzt registrieren"})}),a==="provider"&&!n&&e.jsx("div",{className:"text-center pt-2",children:e.jsx("button",{type:"button",onClick:()=>l("/anbieter-registrierung"),className:"text-sm text-muted-foreground hover:underline",children:"Anbieter ohne Konto? Jetzt kostenlos eintragen"})})]})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 pt-16 sm:pt-20",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-6 sm:py-12 md:py-16",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8 md:mb-12",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2 sm:mb-4",children:"Willkommen zurÃ¼ck"}),e.jsx("p",{className:"text-sm sm:text-base md:text-xl text-muted-foreground",children:"Bitte wÃ¤hlen Sie Ihren Zugangsbereich"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8",children:[e.jsxs(u,{className:"cursor-pointer transition-all hover:shadow-lg",onClick:()=>d("client"),children:[e.jsxs(p,{className:"text-center p-4 sm:p-6",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-4",children:e.jsx(C,{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 text-primary"})}),e.jsx(g,{children:"FÃ¼r Kunden"}),e.jsx(j,{children:"Verwalten Sie Ihre Anfragen und Favoriten"})]}),e.jsxs(w,{children:[e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"Gespeicherte Favoriten einsehen"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4"}),"Anfragestatus verfolgen"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Direkte Kommunikation mit Anbietern"]})]}),e.jsxs(i,{className:"w-full mt-6",children:["Als Kunde anmelden",e.jsx(S,{className:"w-4 h-4 ml-2"})]})]})]}),e.jsxs(u,{className:"cursor-pointer transition-all hover:shadow-lg",onClick:()=>d("provider"),children:[e.jsxs(p,{className:"text-center p-4 sm:p-6",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-4",children:e.jsx(k,{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 text-primary"})}),e.jsx(g,{children:"FÃ¼r Anbieter"}),e.jsx(j,{children:"Verwalten Sie Ihr Unternehmensprofil"})]}),e.jsxs(w,{children:[e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"Firmenprofil bearbeiten"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4"}),"Leads und Anfragen verwalten"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Performance-Statistiken einsehen"]})]}),e.jsxs(i,{className:"w-full mt-6",children:["Als Anbieter anmelden",e.jsx(S,{className:"w-4 h-4 ml-2"})]})]})]}),e.jsxs(u,{className:"cursor-pointer transition-all hover:shadow-lg",onClick:()=>d("admin"),children:[e.jsxs(p,{className:"text-center p-4 sm:p-6",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-4",children:e.jsx(I,{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 text-red-600"})}),e.jsx(g,{children:"FÃ¼r Administratoren"}),e.jsx(j,{children:"Verwalten Sie die gesamte Plattform"})]}),e.jsxs(w,{children:[e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"Anbieter-Verwaltung & Genehmigung"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4"}),"Trust Score Verwaltung"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"System-Monitoring & Analytics"]})]}),e.jsxs(i,{className:"w-full mt-6 bg-red-600 hover:bg-red-700",children:["Als Admin anmelden",e.jsx(S,{className:"w-4 h-4 ml-2"})]})]})]})]})]})})}export{R as default};
