import{aa as F,p as I,r as u,j as e,g as m,N as c,U as y,O as d,a1 as o,P as h,S as p,a8 as g,Y as j,B as l,ab as w,a6 as S,ac as A,a9 as L,I as k}from"./index-48Pj72Q3.js";import{A as U}from"./arrow-left-CiEbzfXm.js";function D(){const[,N]=F(),{toast:x}=I(),[f,b]=u.useState(!1),[r,i]=u.useState(null),[a,v]=u.useState({email:"",password:"",name:"",phone:""}),C=async t=>{t.preventDefault(),b(!0);try{const n=await fetch("/api/auth/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,password:a.password})}),s=await n.json();n.ok&&s.success?(x({title:"Login erfolgreich",description:"Sie werden zum Dashboard weitergeleitet..."}),localStorage.setItem("user",JSON.stringify(s.user)),sessionStorage.setItem("userRole",s.user.role),sessionStorage.setItem("userId",s.user.id),console.log("ðŸ”— Redirecting to:",s.redirectUrl),console.log("ðŸ”— User role:",s.user.role),N(s.redirectUrl),setTimeout(()=>{window.location.pathname!==s.redirectUrl&&(console.log("ðŸ”— Fallback navigation triggered"),window.location.href=s.redirectUrl)},500)):x({title:"Login fehlgeschlagen",description:s.error||"UngÃ¼ltige Anmeldedaten",variant:"destructive"})}catch(n){console.error("Login error:",n),x({title:"Fehler",description:"Verbindungsfehler zum Server",variant:"destructive"})}finally{b(!1)}};return r?e.jsx("div",{className:"min-h-screen bg-gray-50 pt-16 sm:pt-20",children:e.jsxs("div",{className:"max-w-md mx-auto px-3 sm:px-4 py-6 sm:py-12 md:py-16",children:[e.jsxs(l,{variant:"ghost",onClick:()=>i(null),className:"mb-4 sm:mb-6",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"ZurÃ¼ck zur Auswahl"]}),e.jsxs(m,{children:[e.jsxs(c,{className:"text-center p-4 sm:p-6",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-4",children:r==="provider"?e.jsx(S,{className:"w-8 h-8 text-primary"}):r==="admin"?e.jsx(A,{className:"w-8 h-8 text-red-600"}):e.jsx(y,{className:"w-8 h-8 text-primary"})}),e.jsx(d,{children:r==="provider"?"Anbieter-Login":r==="admin"?"Admin-Login":"Kunden-Login"}),e.jsx(o,{children:"Melden Sie sich in Ihrem Konto an"})]}),e.jsx(h,{children:e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(L,{htmlFor:"email",children:"E-Mail"}),e.jsx(k,{id:"email",type:"email",placeholder:"ihre@email.de",value:a.email,onChange:t=>v({...a,email:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(L,{htmlFor:"password",children:"Passwort"}),e.jsx(k,{id:"password",type:"password",value:a.password,onChange:t=>v({...a,password:t.target.value}),required:!0})]}),e.jsx(l,{type:"submit",className:"w-full",disabled:f,children:f?"Verarbeite...":"Anmelden"}),r==="provider"&&e.jsx("div",{className:"text-center pt-2",children:e.jsx("button",{type:"button",onClick:()=>N("/anbieter-registrierung"),className:"text-sm text-muted-foreground hover:underline",children:"Anbieter ohne Konto? Jetzt kostenlos eintragen"})})]})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 pt-16 sm:pt-20",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-6 sm:py-12 md:py-16",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8 md:mb-12",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2 sm:mb-4",children:"Willkommen zurÃ¼ck"}),e.jsx("p",{className:"text-sm sm:text-base md:text-xl text-muted-foreground",children:"Bitte wÃ¤hlen Sie Ihren Zugangsbereich"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8",children:[e.jsxs(m,{className:"cursor-pointer transition-all hover:shadow-lg",onClick:()=>i("client"),children:[e.jsxs(c,{className:"text-center p-4 sm:p-6",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-4",children:e.jsx(y,{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 text-primary"})}),e.jsx(d,{children:"FÃ¼r Kunden"}),e.jsx(o,{children:"Verwalten Sie Ihre Anfragen und Favoriten"})]}),e.jsxs(h,{children:[e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4"}),"Gespeicherte Favoriten einsehen"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"Anfragestatus verfolgen"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),"Direkte Kommunikation mit Anbietern"]})]}),e.jsxs(l,{className:"w-full mt-6",children:["Als Kunde anmelden",e.jsx(w,{className:"w-4 h-4 ml-2"})]})]})]}),e.jsxs(m,{className:"cursor-pointer transition-all hover:shadow-lg",onClick:()=>i("provider"),children:[e.jsxs(c,{className:"text-center p-4 sm:p-6",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-4",children:e.jsx(S,{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 text-primary"})}),e.jsx(d,{children:"FÃ¼r Anbieter"}),e.jsx(o,{children:"Verwalten Sie Ihr Unternehmensprofil"})]}),e.jsxs(h,{children:[e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4"}),"Firmenprofil bearbeiten"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"Leads und Anfragen verwalten"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),"Performance-Statistiken einsehen"]})]}),e.jsxs(l,{className:"w-full mt-6",children:["Als Anbieter anmelden",e.jsx(w,{className:"w-4 h-4 ml-2"})]})]})]}),e.jsxs(m,{className:"cursor-pointer transition-all hover:shadow-lg",onClick:()=>i("admin"),children:[e.jsxs(c,{className:"text-center p-4 sm:p-6",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-4",children:e.jsx(A,{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 text-red-600"})}),e.jsx(d,{children:"FÃ¼r Administratoren"}),e.jsx(o,{children:"Verwalten Sie die gesamte Plattform"})]}),e.jsxs(h,{children:[e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4"}),"Anbieter-Verwaltung & Genehmigung"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"Trust Score Verwaltung"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),"System-Monitoring & Analytics"]})]}),e.jsxs(l,{className:"w-full mt-6 bg-red-600 hover:bg-red-700",children:["Als Admin anmelden",e.jsx(w,{className:"w-4 h-4 ml-2"})]})]})]})]})]})})}export{D as default};
