import{aa as b,r as l,j as e,U as c,B as n,e as u,H as j,bd as k,f as S,aB as C,au as M,av as B,aw as z,az as o,ay as i,ad as D,ac as L,af as U}from"./index-wr2dCn2t.js";import{B as E}from"./bell-Bt3n6wl1.js";import{S as F,M as I}from"./sun-BB9LCqXH.js";function H({notificationCount:d=0,onSearch:m,darkMode:f=!1,onDarkModeToggle:p}){const[,s]=b(),[x,N]=l.useState(""),[a,h]=l.useState(null);l.useEffect(()=>{const r=async()=>{try{const t=await fetch("/api/auth/me",{credentials:"include"});if(t.ok){const w=await t.json();h(w.user)}}catch(t){console.error("Failed to load user:",t)}},g=localStorage.getItem("user");if(g)try{h(JSON.parse(g))}catch(t){console.error("Error parsing stored user:",t)}r()},[]);const y=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),localStorage.removeItem("user"),sessionStorage.clear(),s("/login")}catch(r){console.error("Logout failed:",r),localStorage.removeItem("user"),sessionStorage.clear(),s("/login")}},v=r=>{r.preventDefault(),m&&m(x)};return e.jsx("nav",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-4 py-3 fixed top-0 left-0 right-0 z-50",children:e.jsxs("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("button",{onClick:()=>s("/benutzer-bereich"),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx(c,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Mein Bereich"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>s("/anbieter-finden"),className:"text-gray-600 hover:text-gray-900",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Anbieter finden"]}),e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>s("/meine-favoriten"),className:"text-gray-600 hover:text-gray-900",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Favoriten"]}),e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>s("/ratgeber"),className:"text-gray-600 hover:text-gray-900",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Ratgeber"]})]})]}),e.jsx("div",{className:"hidden lg:flex flex-1 max-w-md mx-6",children:e.jsx("form",{onSubmit:v,className:"w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Anbieter, Services oder Ratgeber suchen...",value:x,onChange:r=>N(r.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white"})]})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative",children:e.jsxs(n,{variant:"ghost",size:"sm",children:[e.jsx(E,{className:"w-4 h-4"}),d>0&&e.jsx(S,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:d})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4 text-gray-500"}),e.jsx(C,{checked:f,onCheckedChange:p}),e.jsx(I,{className:"w-4 h-4 text-gray-500"})]}),e.jsxs(M,{children:[e.jsx(B,{asChild:!0,children:e.jsxs(n,{variant:"ghost",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(c,{className:"w-4 h-4 text-primary"})}),e.jsx("span",{className:"hidden sm:block text-sm font-medium",children:(a==null?void 0:a.name)||"Benutzer"})]})}),e.jsxs(z,{align:"end",className:"w-48",children:[e.jsxs("div",{className:"px-2 py-1.5 text-sm",children:[e.jsx("div",{className:"font-medium",children:(a==null?void 0:a.name)||"Benutzer"}),e.jsx("div",{className:"text-gray-500 text-xs",children:a==null?void 0:a.email})]}),e.jsx(o,{}),e.jsxs(i,{onClick:()=>s("/profil"),children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"Profil bearbeiten"]}),e.jsxs(i,{onClick:()=>s("/meine-favoriten"),children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Meine Favoriten"]}),e.jsxs(i,{onClick:()=>s("/mein-fortschritt"),children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Mein Fortschritt"]}),e.jsx(o,{}),e.jsxs(i,{onClick:()=>s("/kontakt"),children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Support"]}),e.jsx(o,{}),e.jsxs(i,{onClick:y,className:"text-red-600",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Abmelden"]})]})]})]})]})})}export{H as C};
