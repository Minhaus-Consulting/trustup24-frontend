import{r as i,b as w,j as e,e as N,I as y}from"./index-wr2dCn2t.js";import{S as u,a as m,b as g,c as h,d as a}from"./select-yyTeqUwY.js";import{A as S}from"./AgencyCard-ChNQzgd9.js";import"./chevron-up-j_ySeUdU.js";import"./TrustMeter-CF9Jd7Qr.js";import"./external-link-CejWxruk.js";function T(){const[t,p]=i.useState(""),[n,j]=i.useState(""),[c,v]=i.useState("trust_score"),{data:d=[],isLoading:f}=w({queryKey:["/api/agencies"]}),o=i.useMemo(()=>{let s=d;return t&&(s=s.filter(r=>{var l;return r.agencyName.toLowerCase().includes(t.toLowerCase())||((l=r.description)==null?void 0:l.toLowerCase().includes(t.toLowerCase()))})),n&&(s=s.filter(r=>{var l,x;return((l=r.servicesOffered)==null?void 0:l.includes(n))||((x=r.supportedCompanyTypes)==null?void 0:x.includes(n))})),s=[...s].sort((r,l)=>{switch(c){case"trust_score":return(l.trustScore||0)-(r.trustScore||0);case"rating":return parseFloat(l.averageRating||"0")-parseFloat(r.averageRating||"0");case"response_time":return parseFloat(r.averageResponseTimeHours||"24")-parseFloat(l.averageResponseTimeHours||"24");case"reviews":return(l.totalReviews||0)-(r.totalReviews||0);default:return 0}}),s},[d,t,n,c]);return f?e.jsx("div",{className:"pt-16 min-h-screen bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[...Array(6)].map((s,r)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]},r))})})}):e.jsxs("div",{className:"pt-16 min-h-screen bg-gray-50",children:[e.jsx("div",{className:"sticky top-16 z-40 bg-white border-b border-gray-200 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full lg:w-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(y,{placeholder:"Agentur suchen...",className:"pl-10 pr-4 py-2 w-full sm:w-64",value:t,onChange:s=>p(s.target.value)})]}),e.jsxs(u,{value:n,onValueChange:j,children:[e.jsx(m,{className:"w-full sm:w-48",children:e.jsx(g,{placeholder:"Alle Spezialisierungen"})}),e.jsxs(h,{children:[e.jsx(a,{value:"",children:"Alle Spezialisierungen"}),e.jsx(a,{value:"freezone",children:"Freezone"}),e.jsx(a,{value:"mainland",children:"Mainland"}),e.jsx(a,{value:"offshore",children:"Offshore"}),e.jsx(a,{value:"visa",children:"Visa Services"}),e.jsx(a,{value:"banking",children:"Banking"}),e.jsx(a,{value:"legal",children:"Legal"})]})]}),e.jsxs(u,{value:c,onValueChange:v,children:[e.jsx(m,{className:"w-full sm:w-48",children:e.jsx(g,{})}),e.jsxs(h,{children:[e.jsx(a,{value:"trust_score",children:"Trust Score"}),e.jsx(a,{value:"rating",children:"Bewertung"}),e.jsx(a,{value:"response_time",children:"Antwortzeit"}),e.jsx(a,{value:"reviews",children:"Anzahl Reviews"})]})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:o.length})," von"," ",e.jsx("span",{className:"font-medium",children:d.length})," Agenturen"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"font-bold text-3xl lg:text-4xl mb-4",children:["Die besten Dubai ",e.jsx("span",{className:"gradient-text",children:"Firmen-Gründungsagenturen"})]}),e.jsx("p",{className:"text-lg text-gray-600",children:"Vergleichen Sie verifizierte Agenturen mit transparenten Trust Scores und echten Kundenbewertungen."})]}),o.length>0?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map(s=>e.jsx(S,{agency:s},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-500 text-lg",children:"Keine Agenturen gefunden, die Ihren Filterkriterien entsprechen."}),e.jsx("div",{className:"text-gray-400 text-sm mt-2",children:"Versuchen Sie, Ihre Suchkriterien zu ändern oder zu erweitern."})]})]})]})}export{T as default};
