var oa=Object.defineProperty;var ua=(n,e,t)=>e in n?oa(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var i=(n,e,t)=>ua(n,typeof e!="symbol"?e+"":e,t);import{c as ca,E as I,p as da,q as ma,s as pa,j as a,F as ga,t as E,v as U,w as Q,x as R,I as se,y as $,$ as fa,B as yi,G as ha,J as ya,K as _a,r as xa,m as W,a0 as ba,f as Y,_ as Na,h as wa,S as va,g as ae,N as le,O as oe,a1 as ue,P as ce,V as Sa,a2 as Ta,a3 as Se,a4 as ja,Y as Pa,a5 as Ia}from"./index-48Pj72Q3.js";import{T as Aa,a as Da,b as Te,c as je}from"./tabs-DDUjb8uk.js";import{T as za}from"./textarea-BLf_nyzL.js";import{S as de,a as me,b as pe,c as ge,d as q}from"./select-CZxI7kd3.js";import{C as Ca}from"./checkbox-Dj13i6OQ.js";import{G as Va}from"./graduation-cap-CISSHWbH.js";import"./chevron-up-D_xeGbNE.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=ca("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),u=Symbol.for("drizzle:entityKind");function D(n,e){if(!n||typeof n!="object")return!1;if(n instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,u))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(n).constructor;if(t)for(;t;){if(u in t&&t[u]===e[u])return!0;t=Object.getPrototypeOf(t)}return!1}var Be;Be=u;class X{constructor(e,t){i(this,"name");i(this,"keyAsName");i(this,"primary");i(this,"notNull");i(this,"default");i(this,"defaultFn");i(this,"onUpdateFn");i(this,"hasDefault");i(this,"isUnique");i(this,"uniqueName");i(this,"uniqueType");i(this,"dataType");i(this,"columnType");i(this,"enumValues");i(this,"generated");i(this,"generatedIdentity");i(this,"config");this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}i(X,Be,"Column");var Fe;Fe=u;class _i{constructor(e,t,r){i(this,"config");i(this,"$default",this.$defaultFn);i(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}i(_i,Fe,"ColumnBuilder");const O=Symbol.for("drizzle:Name");var qe;qe=u;class xi{constructor(e,t){i(this,"reference");i(this,"_onUpdate","no action");i(this,"_onDelete","no action");this.reference=()=>{const{name:r,columns:l,foreignColumns:o}=e();return{name:r,columns:l,foreignTable:o[0].table,foreignColumns:o}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new bi(e,this)}}i(xi,qe,"PgForeignKeyBuilder");var Le;Le=u;class bi{constructor(e,t){i(this,"reference");i(this,"onUpdate");i(this,"onDelete");this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}getName(){const{name:e,columns:t,foreignColumns:r}=this.reference(),l=t.map(y=>y.name),o=r.map(y=>y.name),d=[this.table[O],...l,r[0].table[O],...o];return e??`${d.join("_")}_fk`}}i(bi,Le,"PgForeignKey");function Fa(n,...e){return n(...e)}function qa(n,e){return`${n[O]}_${e.join("_")}_unique`}function Pe(n,e,t){for(let r=e;r<n.length;r++){const l=n[r];if(l==="\\"){r++;continue}if(l==='"')return[n.slice(e,r).replace(/\\/g,""),r+1];if(!t&&(l===","||l==="}"))return[n.slice(e,r).replace(/\\/g,""),r]}return[n.slice(e).replace(/\\/g,""),n.length]}function Ni(n,e=0){const t=[];let r=e,l=!1;for(;r<n.length;){const o=n[r];if(o===","){(l||r===e)&&t.push(""),l=!0,r++;continue}if(l=!1,o==="\\"){r+=2;continue}if(o==='"'){const[_,N]=Pe(n,r+1,!0);t.push(_),r=N;continue}if(o==="}")return[t,r+1];if(o==="{"){const[_,N]=Ni(n,r+1);t.push(_),r=N;continue}const[d,y]=Pe(n,r,!1);t.push(d),r=y}return[t,r]}function La(n){const[e]=Ni(n,1);return e}function wi(n){return`{${n.map(e=>Array.isArray(e)?wi(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var Me,Ee;class x extends(Ee=_i,Me=u,Ee){constructor(){super(...arguments);i(this,"foreignKeyConfigs",[])}array(t){return new Si(this.config.name,this,t)}references(t,r={}){return this.foreignKeyConfigs.push({ref:t,actions:r}),this}unique(t,r){return this.config.isUnique=!0,this.config.uniqueName=t,this.config.uniqueType=r==null?void 0:r.nulls,this}generatedAlwaysAs(t){return this.config.generated={as:t,type:"always",mode:"stored"},this}buildForeignKeys(t,r){return this.foreignKeyConfigs.map(({ref:l,actions:o})=>Fa((d,y)=>{const _=new xi(()=>{const N=d();return{columns:[t],foreignColumns:[N]}});return y.onUpdate&&_.onUpdate(y.onUpdate),y.onDelete&&_.onDelete(y.onDelete),_.build(r)},l,o))}buildExtraConfigColumn(t){return new vi(t,this.config)}}i(x,Me,"PgColumnBuilder");var Ue,Qe;class f extends(Qe=X,Ue=u,Qe){constructor(e,t){t.uniqueName||(t.uniqueName=qa(e,[t.name])),super(e,t),this.table=e}}i(f,Ue,"PgColumn");var Re,$e;class vi extends($e=f,Re=u,$e){constructor(){super(...arguments);i(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});i(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(t){return this.indexConfig.opClass=t,this}}i(vi,Re,"ExtraConfigColumn");var Ke,Oe;class Si extends(Oe=x,Ke=u,Oe){constructor(e,t,r){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=r}build(e){const t=this.config.baseBuilder.build(e);return new _e(e,this.config,t)}}i(Si,Ke,"PgArrayBuilder");var Ge,Xe;const ie=class ie extends(Xe=f,Ge=u,Xe){constructor(t,r,l,o){super(t,r);i(this,"size");this.baseColumn=l,this.range=o,this.size=r.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(t){return typeof t=="string"&&(t=La(t)),t.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(t,r=!1){const l=t.map(o=>o===null?null:D(this.baseColumn,ie)?this.baseColumn.mapToDriverValue(o,!0):this.baseColumn.mapToDriverValue(o));return r?l:wi(l)}};i(ie,Ge,"PgArray");let _e=ie;const Ie=Symbol.for("drizzle:isPgEnum");function Ma(n){return!!n&&typeof n=="function"&&Ie in n&&n[Ie]===!0}var Je;Je=u;class be{constructor(e,t,r,l=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:r,isWith:l}}}i(be,Je,"Subquery");const Ea={startActiveSpan(n,e){return e()}},G=Symbol.for("drizzle:ViewBaseConfig"),fe=Symbol.for("drizzle:Schema"),Ae=Symbol.for("drizzle:Columns"),De=Symbol.for("drizzle:ExtraConfigColumns"),he=Symbol.for("drizzle:OriginalName"),ye=Symbol.for("drizzle:BaseName"),Z=Symbol.for("drizzle:IsAlias"),ze=Symbol.for("drizzle:ExtraConfigBuilder"),Ti=Symbol.for("drizzle:IsDrizzleTable");var We,He,Ye,Ze,ke,et,tt,nt,rt,it;it=u,rt=O,nt=he,tt=fe,et=Ae,ke=De,Ze=ye,Ye=Z,He=Ti,We=ze;class z{constructor(e,t,r){i(this,rt);i(this,nt);i(this,tt);i(this,et);i(this,ke);i(this,Ze);i(this,Ye,!1);i(this,He,!0);i(this,We);this[O]=this[he]=e,this[fe]=t,this[ye]=r}}i(z,it,"Table"),i(z,"Symbol",{Name:O,Schema:fe,OriginalName:he,Columns:Ae,ExtraConfigColumns:De,BaseName:ye,IsAlias:Z,ExtraConfigBuilder:ze});function ji(n){return typeof n=="object"&&n!==null&&Ti in n}function Ua(n){return n!=null&&typeof n.getSQL=="function"}function Qa(n){var t;const e={sql:"",params:[]};for(const r of n)e.sql+=r.sql,e.params.push(...r.params),(t=r.typings)!=null&&t.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var st;st=u;class L{constructor(e){i(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new T([this])}}i(L,st,"StringChunk");var at;at=u;const K=class K{constructor(e){i(this,"decoder",Pi);i(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Ea.startActiveSpan("drizzle.buildSQL",t=>{const r=this.buildQueryFromSourceParams(this.queryChunks,e);return t==null||t.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,t){const r=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:l,escapeName:o,escapeParam:d,prepareTyping:y,inlineParams:_,paramStartIndex:N}=r;return Qa(e.map(c=>{var M;if(D(c,L))return{sql:c.value.join(""),params:[]};if(D(c,k))return{sql:o(c.value),params:[]};if(c===void 0)return{sql:"",params:[]};if(Array.isArray(c)){const b=[new L("(")];for(const[j,la]of c.entries())b.push(la),j<c.length-1&&b.push(new L(", "));return b.push(new L(")")),this.buildQueryFromSourceParams(b,r)}if(D(c,K))return this.buildQueryFromSourceParams(c.queryChunks,{...r,inlineParams:_||c.shouldInlineParams});if(D(c,z)){const b=c[z.Symbol.Schema],j=c[z.Symbol.Name];return{sql:b===void 0||c[Z]?o(j):o(b)+"."+o(j),params:[]}}if(D(c,X)){const b=l.getColumnCasing(c);if(t.invokeSource==="indexes")return{sql:o(b),params:[]};const j=c.table[z.Symbol.Schema];return{sql:c.table[Z]||j===void 0?o(c.table[z.Symbol.Name])+"."+o(b):o(j)+"."+o(c.table[z.Symbol.Name])+"."+o(b),params:[]}}if(D(c,Di)){const b=c[G].schema,j=c[G].name;return{sql:b===void 0||c[G].isAlias?o(j):o(b)+"."+o(j),params:[]}}if(D(c,Ne)){if(D(c.value,te))return{sql:d(N.value++,c),params:[c],typings:["none"]};const b=c.value===null?null:c.encoder.mapToDriverValue(c.value);if(D(b,K))return this.buildQueryFromSourceParams([b],r);if(_)return{sql:this.mapInlineParam(b,r),params:[]};let j=["none"];return y&&(j=[y(c.encoder)]),{sql:d(N.value++,b),params:[b],typings:j}}return D(c,te)?{sql:d(N.value++,c),params:[c],typings:["none"]}:D(c,K.Aliased)&&c.fieldAlias!==void 0?{sql:o(c.fieldAlias),params:[]}:D(c,be)?c._.isWith?{sql:o(c._.alias),params:[]}:this.buildQueryFromSourceParams([new L("("),c._.sql,new L(") "),new k(c._.alias)],r):Ma(c)?c.schema?{sql:o(c.schema)+"."+o(c.enumName),params:[]}:{sql:o(c.enumName),params:[]}:Ua(c)?(M=c.shouldOmitSQLParens)!=null&&M.call(c)?this.buildQueryFromSourceParams([c.getSQL()],r):this.buildQueryFromSourceParams([new L("("),c.getSQL(),new L(")")],r):_?{sql:this.mapInlineParam(c,r),params:[]}:{sql:d(N.value++,c),params:[c],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){const r=e.toString();return t(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new K.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};i(K,at,"SQL");let T=K;var lt;lt=u;class k{constructor(e){i(this,"brand");this.value=e}getSQL(){return new T([this])}}i(k,lt,"Name");const Pi={mapFromDriverValue:n=>n},Ii={mapToDriverValue:n=>n};({...Pi,...Ii});var ot;ot=u;class Ne{constructor(e,t=Ii){i(this,"brand");this.value=e,this.encoder=t}getSQL(){return new T([this])}}i(Ne,ot,"Param");function ee(n,...e){const t=[];(e.length>0||n.length>0&&n[0]!=="")&&t.push(new L(n[0]));for(const[r,l]of e.entries())t.push(l,new L(n[r+1]));return new T(t)}(n=>{function e(){return new T([])}n.empty=e;function t(_){return new T(_)}n.fromList=t;function r(_){return new T([new L(_)])}n.raw=r;function l(_,N){const c=[];for(const[M,b]of _.entries())M>0&&N!==void 0&&c.push(N),c.push(b);return new T(c)}n.join=l;function o(_){return new k(_)}n.identifier=o;function d(_){return new te(_)}n.placeholder=d;function y(_,N){return new Ne(_,N)}n.param=y})(ee||(ee={}));(n=>{var t;t=u;const r=class r{constructor(o,d){i(this,"isSelectionField",!1);this.sql=o,this.fieldAlias=d}getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}};i(r,t,"SQL.Aliased");let e=r;n.Aliased=e})(T||(T={}));var ut;ut=u;class te{constructor(e){this.name=e}getSQL(){return new T([this])}}i(te,ut,"Placeholder");const Ai=Symbol.for("drizzle:IsDrizzleView");var ct,dt,mt;mt=u,dt=G,ct=Ai;class Di{constructor({name:e,schema:t,selectedFields:r,query:l}){i(this,dt);i(this,ct,!0);this[G]={name:e,originalName:e,schema:t,selectedFields:r,query:l,isExisting:!l,isAlias:!1}}getSQL(){return new T([this])}}i(Di,mt,"View");function Ra(n){return typeof n=="object"&&n!==null&&Ai in n}X.prototype.getSQL=function(){return new T([this])};z.prototype.getSQL=function(){return new T([this])};be.prototype.getSQL=function(){return new T([this])};function $a(n){return n[z.Symbol.Columns]}function Ka(n){return n[G].selectedFields}function A(n,e){return{name:typeof n=="string"&&n.length>0?n:"",config:typeof n=="object"?n:e}}var pt,gt;class H extends(gt=x,pt=u,gt){generatedAlwaysAsIdentity(e){if(e){const{name:t,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:t,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}i(H,pt,"PgIntColumnBaseBuilder");var ft,ht;class zi extends(ht=H,ft=u,ht){constructor(e){super(e,"number","PgBigInt53")}build(e){return new Ci(e,this.config)}}i(zi,ft,"PgBigInt53Builder");var yt,_t;class Ci extends(_t=f,yt=u,_t){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}i(Ci,yt,"PgBigInt53");var xt,bt;class Vi extends(bt=H,xt=u,bt){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Bi(e,this.config)}}i(Vi,xt,"PgBigInt64Builder");var Nt,wt;class Bi extends(wt=f,Nt=u,wt){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}i(Bi,Nt,"PgBigInt64");function Oa(n,e){const{name:t,config:r}=A(n,e);return r.mode==="number"?new zi(t):new Vi(t)}var vt,St;class Fi extends(St=x,vt=u,St){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new qi(e,this.config)}}i(Fi,vt,"PgBigSerial53Builder");var Tt,jt;class qi extends(jt=f,Tt=u,jt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}i(qi,Tt,"PgBigSerial53");var Pt,It;class Li extends(It=x,Pt=u,It){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Mi(e,this.config)}}i(Li,Pt,"PgBigSerial64Builder");var At,Dt;class Mi extends(Dt=f,At=u,Dt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}i(Mi,At,"PgBigSerial64");function Ga(n,e){const{name:t,config:r}=A(n,e);return r.mode==="number"?new Fi(t):new Li(t)}var zt,Ct;class Ei extends(Ct=x,zt=u,Ct){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Ui(e,this.config)}}i(Ei,zt,"PgBooleanBuilder");var Vt,Bt;class Ui extends(Bt=f,Vt=u,Bt){getSQLType(){return"boolean"}}i(Ui,Vt,"PgBoolean");function h(n){return new Ei(n??"")}var Ft,qt;class Qi extends(qt=x,Ft=u,qt){constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Ri(e,this.config)}}i(Qi,Ft,"PgCharBuilder");var Lt,Mt;class Ri extends(Mt=f,Lt=u,Mt){constructor(){super(...arguments);i(this,"length",this.config.length);i(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}i(Ri,Lt,"PgChar");function Xa(n,e={}){const{name:t,config:r}=A(n,e);return new Qi(t,r)}var Et,Ut;class $i extends(Ut=x,Et=u,Ut){constructor(e){super(e,"string","PgCidr")}build(e){return new Ki(e,this.config)}}i($i,Et,"PgCidrBuilder");var Qt,Rt;class Ki extends(Rt=f,Qt=u,Rt){getSQLType(){return"cidr"}}i(Ki,Qt,"PgCidr");function Ja(n){return new $i(n??"")}var $t,Kt;class Oi extends(Kt=x,$t=u,Kt){constructor(e,t,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=r}build(e){return new Gi(e,this.config)}}i(Oi,$t,"PgCustomColumnBuilder");var Ot,Gt;class Gi extends(Gt=f,Ot=u,Gt){constructor(t,r){super(t,r);i(this,"sqlName");i(this,"mapTo");i(this,"mapFrom");this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(t){return typeof this.mapFrom=="function"?this.mapFrom(t):t}mapToDriverValue(t){return typeof this.mapTo=="function"?this.mapTo(t):t}}i(Gi,Ot,"PgCustomColumn");function Wa(n){return(e,t)=>{const{name:r,config:l}=A(e,t);return new Oi(r,l,n)}}var Xt,Jt;class J extends(Jt=x,Xt=u,Jt){defaultNow(){return this.default(ee`now()`)}}i(J,Xt,"PgDateColumnBaseBuilder");var Wt,Ht;class Xi extends(Ht=J,Wt=u,Ht){constructor(e){super(e,"date","PgDate")}build(e){return new Ji(e,this.config)}}i(Xi,Wt,"PgDateBuilder");var Yt,Zt;class Ji extends(Zt=f,Yt=u,Zt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}i(Ji,Yt,"PgDate");var kt,en;class Wi extends(en=J,kt=u,en){constructor(e){super(e,"string","PgDateString")}build(e){return new Hi(e,this.config)}}i(Wi,kt,"PgDateStringBuilder");var tn,nn;class Hi extends(nn=f,tn=u,nn){getSQLType(){return"date"}}i(Hi,tn,"PgDateString");function Ha(n,e){const{name:t,config:r}=A(n,e);return(r==null?void 0:r.mode)==="date"?new Xi(t):new Wi(t)}var rn,sn;class Yi extends(sn=x,rn=u,sn){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Zi(e,this.config)}}i(Yi,rn,"PgDoublePrecisionBuilder");var an,ln;class Zi extends(ln=f,an=u,ln){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}i(Zi,an,"PgDoublePrecision");function Ya(n){return new Yi(n??"")}var on,un;class ki extends(un=x,on=u,un){constructor(e){super(e,"string","PgInet")}build(e){return new es(e,this.config)}}i(ki,on,"PgInetBuilder");var cn,dn;class es extends(dn=f,cn=u,dn){getSQLType(){return"inet"}}i(es,cn,"PgInet");function Za(n){return new ki(n??"")}var mn,pn;class ts extends(pn=H,mn=u,pn){constructor(e){super(e,"number","PgInteger")}build(e){return new ns(e,this.config)}}i(ts,mn,"PgIntegerBuilder");var gn,fn;class ns extends(fn=f,gn=u,fn){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}i(ns,gn,"PgInteger");function g(n){return new ts(n??"")}var hn,yn;class rs extends(yn=x,hn=u,yn){constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new is(e,this.config)}}i(rs,hn,"PgIntervalBuilder");var _n,xn;class is extends(xn=f,_n=u,xn){constructor(){super(...arguments);i(this,"fields",this.config.intervalConfig.fields);i(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const t=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${t}${r}`}}i(is,_n,"PgInterval");function ka(n,e={}){const{name:t,config:r}=A(n,e);return new rs(t,r)}var bn,Nn;class ss extends(Nn=x,bn=u,Nn){constructor(e){super(e,"json","PgJson")}build(e){return new as(e,this.config)}}i(ss,bn,"PgJsonBuilder");var wn,vn;class as extends(vn=f,wn=u,vn){constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}i(as,wn,"PgJson");function el(n){return new ss(n??"")}var Sn,Tn;class ls extends(Tn=x,Sn=u,Tn){constructor(e){super(e,"json","PgJsonb")}build(e){return new os(e,this.config)}}i(ls,Sn,"PgJsonbBuilder");var jn,Pn;class os extends(Pn=f,jn=u,Pn){constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}i(os,jn,"PgJsonb");function C(n){return new ls(n??"")}var In,An;class us extends(An=x,In=u,An){constructor(e){super(e,"array","PgLine")}build(e){return new cs(e,this.config)}}i(us,In,"PgLineBuilder");var Dn,zn;class cs extends(zn=f,Dn=u,zn){getSQLType(){return"line"}mapFromDriverValue(e){const[t,r,l]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(r),Number.parseFloat(l)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}i(cs,Dn,"PgLine");var Cn,Vn;class ds extends(Vn=x,Cn=u,Vn){constructor(e){super(e,"json","PgLineABC")}build(e){return new ms(e,this.config)}}i(ds,Cn,"PgLineABCBuilder");var Bn,Fn;class ms extends(Fn=f,Bn=u,Fn){getSQLType(){return"line"}mapFromDriverValue(e){const[t,r,l]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(r),c:Number.parseFloat(l)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}i(ms,Bn,"PgLineABC");function tl(n,e){const{name:t,config:r}=A(n,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new us(t):new ds(t)}var qn,Ln;class ps extends(Ln=x,qn=u,Ln){constructor(e){super(e,"string","PgMacaddr")}build(e){return new gs(e,this.config)}}i(ps,qn,"PgMacaddrBuilder");var Mn,En;class gs extends(En=f,Mn=u,En){getSQLType(){return"macaddr"}}i(gs,Mn,"PgMacaddr");function nl(n){return new ps(n??"")}var Un,Qn;class fs extends(Qn=x,Un=u,Qn){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new hs(e,this.config)}}i(fs,Un,"PgMacaddr8Builder");var Rn,$n;class hs extends($n=f,Rn=u,$n){getSQLType(){return"macaddr8"}}i(hs,Rn,"PgMacaddr8");function rl(n){return new fs(n??"")}var Kn,On;class ys extends(On=x,Kn=u,On){constructor(e,t,r){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=r}build(e){return new _s(e,this.config)}}i(ys,Kn,"PgNumericBuilder");var Gn,Xn;class _s extends(Xn=f,Gn=u,Xn){constructor(t,r){super(t,r);i(this,"precision");i(this,"scale");this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}i(_s,Gn,"PgNumeric");function xs(n,e){const{name:t,config:r}=A(n,e);return new ys(t,r==null?void 0:r.precision,r==null?void 0:r.scale)}const P=xs;var Jn,Wn;class bs extends(Wn=x,Jn=u,Wn){constructor(e){super(e,"array","PgPointTuple")}build(e){return new Ns(e,this.config)}}i(bs,Jn,"PgPointTupleBuilder");var Hn,Yn;class Ns extends(Yn=f,Hn=u,Yn){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,r]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}i(Ns,Hn,"PgPointTuple");var Zn,kn;class ws extends(kn=x,Zn=u,kn){constructor(e){super(e,"json","PgPointObject")}build(e){return new vs(e,this.config)}}i(ws,Zn,"PgPointObjectBuilder");var er,tr;class vs extends(tr=f,er=u,tr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}i(vs,er,"PgPointObject");function il(n,e){const{name:t,config:r}=A(n,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new bs(t):new ws(t)}function sl(n){const e=[];for(let t=0;t<n.length;t+=2)e.push(Number.parseInt(n.slice(t,t+2),16));return new Uint8Array(e)}function Ce(n,e){const t=new ArrayBuffer(8),r=new DataView(t);for(let l=0;l<8;l++)r.setUint8(l,n[e+l]);return r.getFloat64(0,!0)}function Ss(n){const e=sl(n);let t=0;const r=e[t];t+=1;const l=new DataView(e.buffer),o=l.getUint32(t,r===1);if(t+=4,o&536870912&&(l.getUint32(t,r===1),t+=4),(o&65535)===1){const d=Ce(e,t);t+=8;const y=Ce(e,t);return t+=8,[d,y]}throw new Error("Unsupported geometry type")}var nr,rr;class Ts extends(rr=x,nr=u,rr){constructor(e){super(e,"array","PgGeometry")}build(e){return new js(e,this.config)}}i(Ts,nr,"PgGeometryBuilder");var ir,sr;class js extends(sr=f,ir=u,sr){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return Ss(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}i(js,ir,"PgGeometry");var ar,lr;class Ps extends(lr=x,ar=u,lr){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Is(e,this.config)}}i(Ps,ar,"PgGeometryObjectBuilder");var or,ur;class Is extends(ur=f,or=u,ur){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const t=Ss(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}i(Is,or,"PgGeometryObject");function al(n,e){const{name:t,config:r}=A(n,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new Ts(t):new Ps(t)}var cr,dr;class As extends(dr=x,cr=u,dr){constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new Ds(e,this.config)}}i(As,cr,"PgRealBuilder");var mr,pr;class Ds extends(pr=f,mr=u,pr){constructor(t,r){super(t,r);i(this,"mapFromDriverValue",t=>typeof t=="string"?Number.parseFloat(t):t)}getSQLType(){return"real"}}i(Ds,mr,"PgReal");function ll(n){return new As(n??"")}var gr,fr;class zs extends(fr=x,gr=u,fr){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Cs(e,this.config)}}i(zs,gr,"PgSerialBuilder");var hr,yr;class Cs extends(yr=f,hr=u,yr){getSQLType(){return"serial"}}i(Cs,hr,"PgSerial");function ol(n){return new zs(n??"")}var _r,xr;class Vs extends(xr=H,_r=u,xr){constructor(e){super(e,"number","PgSmallInt")}build(e){return new Bs(e,this.config)}}i(Vs,_r,"PgSmallIntBuilder");var br,Nr;class Bs extends(Nr=f,br=u,Nr){constructor(){super(...arguments);i(this,"mapFromDriverValue",t=>typeof t=="string"?Number(t):t)}getSQLType(){return"smallint"}}i(Bs,br,"PgSmallInt");function ul(n){return new Vs(n??"")}var wr,vr;class Fs extends(vr=x,wr=u,vr){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new qs(e,this.config)}}i(Fs,wr,"PgSmallSerialBuilder");var Sr,Tr;class qs extends(Tr=f,Sr=u,Tr){getSQLType(){return"smallserial"}}i(qs,Sr,"PgSmallSerial");function cl(n){return new Fs(n??"")}var jr,Pr;class Ls extends(Pr=x,jr=u,Pr){constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new Ms(e,this.config)}}i(Ls,jr,"PgTextBuilder");var Ir,Ar;class Ms extends(Ar=f,Ir=u,Ar){constructor(){super(...arguments);i(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}i(Ms,Ir,"PgText");function s(n,e={}){const{name:t,config:r}=A(n,e);return new Ls(t,r)}var Dr,zr;class Es extends(zr=J,Dr=u,zr){constructor(e,t,r){super(e,"string","PgTime"),this.withTimezone=t,this.precision=r,this.config.withTimezone=t,this.config.precision=r}build(e){return new Us(e,this.config)}}i(Es,Dr,"PgTimeBuilder");var Cr,Vr;class Us extends(Vr=f,Cr=u,Vr){constructor(t,r){super(t,r);i(this,"withTimezone");i(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Us,Cr,"PgTime");function dl(n,e={}){const{name:t,config:r}=A(n,e);return new Es(t,r.withTimezone??!1,r.precision)}var Br,Fr;class Qs extends(Fr=J,Br=u,Fr){constructor(e,t,r){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=r}build(e){return new Rs(e,this.config)}}i(Qs,Br,"PgTimestampBuilder");var qr,Lr;class Rs extends(Lr=f,qr=u,Lr){constructor(t,r){super(t,r);i(this,"withTimezone");i(this,"precision");i(this,"mapFromDriverValue",t=>new Date(this.withTimezone?t:t+"+0000"));i(this,"mapToDriverValue",t=>t.toISOString());this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Rs,qr,"PgTimestamp");var Mr,Er;class $s extends(Er=J,Mr=u,Er){constructor(e,t,r){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=r}build(e){return new Ks(e,this.config)}}i($s,Mr,"PgTimestampStringBuilder");var Ur,Qr;class Ks extends(Qr=f,Ur=u,Qr){constructor(t,r){super(t,r);i(this,"withTimezone");i(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Ks,Ur,"PgTimestampString");function p(n,e={}){const{name:t,config:r}=A(n,e);return(r==null?void 0:r.mode)==="string"?new $s(t,r.withTimezone??!1,r.precision):new Qs(t,(r==null?void 0:r.withTimezone)??!1,r==null?void 0:r.precision)}var Rr,$r;class Os extends($r=x,Rr=u,$r){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(ee`gen_random_uuid()`)}build(e){return new Gs(e,this.config)}}i(Os,Rr,"PgUUIDBuilder");var Kr,Or;class Gs extends(Or=f,Kr=u,Or){getSQLType(){return"uuid"}}i(Gs,Kr,"PgUUID");function m(n){return new Os(n??"")}var Gr,Xr;class Xs extends(Xr=x,Gr=u,Xr){constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Js(e,this.config)}}i(Xs,Gr,"PgVarcharBuilder");var Jr,Wr;class Js extends(Wr=f,Jr=u,Wr){constructor(){super(...arguments);i(this,"length",this.config.length);i(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}i(Js,Jr,"PgVarchar");function ne(n,e={}){const{name:t,config:r}=A(n,e);return new Xs(t,r)}var Hr,Yr;class Ws extends(Yr=x,Hr=u,Yr){constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new Hs(e,this.config)}}i(Ws,Hr,"PgBinaryVectorBuilder");var Zr,kr;class Hs extends(kr=f,Zr=u,kr){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}i(Hs,Zr,"PgBinaryVector");function ml(n,e){const{name:t,config:r}=A(n,e);return new Ws(t,r)}var ei,ti;class Ys extends(ti=x,ei=u,ti){constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new Zs(e,this.config)}}i(Ys,ei,"PgHalfVectorBuilder");var ni,ri;class Zs extends(ri=f,ni=u,ri){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}i(Zs,ni,"PgHalfVector");function pl(n,e){const{name:t,config:r}=A(n,e);return new Ys(t,r)}var ii,si;class ks extends(si=x,ii=u,si){constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new ea(e,this.config)}}i(ks,ii,"PgSparseVectorBuilder");var ai,li;class ea extends(li=f,ai=u,li){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}i(ea,ai,"PgSparseVector");function gl(n,e){const{name:t,config:r}=A(n,e);return new ks(t,r)}var oi,ui;class ta extends(ui=x,oi=u,ui){constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new na(e,this.config)}}i(ta,oi,"PgVectorBuilder");var ci,di;class na extends(di=f,ci=u,di){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}i(na,ci,"PgVector");function fl(n,e){const{name:t,config:r}=A(n,e);return new ta(t,r)}function hl(){return{bigint:Oa,bigserial:Ga,boolean:h,char:Xa,cidr:Ja,customType:Wa,date:Ha,doublePrecision:Ya,inet:Za,integer:g,interval:ka,json:el,jsonb:C,line:tl,macaddr:nl,macaddr8:rl,numeric:xs,point:il,geometry:al,real:ll,serial:ol,smallint:ul,smallserial:cl,text:s,time:dl,timestamp:p,uuid:m,varchar:ne,bit:ml,halfvec:pl,sparsevec:gl,vector:fl}}const xe=Symbol.for("drizzle:PgInlineForeignKeys"),Ve=Symbol.for("drizzle:EnableRLS");var mi,pi,gi,fi,hi;class re extends(hi=z,fi=u,gi=xe,pi=Ve,mi=z.Symbol.ExtraConfigBuilder,hi){constructor(){super(...arguments);i(this,gi,[]);i(this,pi,!1);i(this,mi)}}i(re,fi,"PgTable"),i(re,"Symbol",Object.assign({},z.Symbol,{InlineForeignKeys:xe,EnableRLS:Ve}));function yl(n,e,t,r,l=n){const o=new re(n,r,l),d=typeof e=="function"?e(hl()):e,y=Object.fromEntries(Object.entries(d).map(([c,M])=>{const b=M;b.setName(c);const j=b.build(o);return o[xe].push(...b.buildForeignKeys(j,o)),[c,j]})),_=Object.fromEntries(Object.entries(d).map(([c,M])=>{const b=M;b.setName(c);const j=b.buildExtraConfigColumn(o);return[c,j]})),N=Object.assign(o,y);return N[z.Symbol.Columns]=y,N[z.Symbol.ExtraConfigColumns]=_,Object.assign(N,{enableRLS:()=>(N[re.Symbol.EnableRLS]=!0,N)})}const v=(n,e,t)=>yl(n,e,t,void 0),w={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function S(n,e){return e.includes(n.columnType)}function _l(n){return"enumValues"in n&&Array.isArray(n.enumValues)&&n.enumValues.length>0}const xl=I.union([I.string(),I.number(),I.boolean(),I.null()]),bl=I.union([xl,I.record(I.any()),I.array(I.any())]),Nl=I.custom(n=>n instanceof Buffer);function ra(n,e){const t=(e==null?void 0:e.zodInstance)??I,r=(e==null?void 0:e.coerce)??{};let l;return _l(n)&&(l=n.enumValues.length?t.enum(n.enumValues):t.string()),l||(S(n,["PgGeometry","PgPointTuple"])?l=t.tuple([t.number(),t.number()]):S(n,["PgGeometryObject","PgPointObject"])?l=t.object({x:t.number(),y:t.number()}):S(n,["PgHalfVector","PgVector"])?(l=t.array(t.number()),l=n.dimensions?l.length(n.dimensions):l):S(n,["PgLine"])?l=t.tuple([t.number(),t.number(),t.number()]):S(n,["PgLineABC"])?l=t.object({a:t.number(),b:t.number(),c:t.number()}):S(n,["PgArray"])?(l=t.array(ra(n.baseColumn,t)),l=n.size?l.length(n.size):l):n.dataType==="array"?l=t.array(t.any()):n.dataType==="number"?l=wl(n,t,r):n.dataType==="bigint"?l=vl(n,t,r):n.dataType==="boolean"?l=r===!0||r.boolean?t.coerce.boolean():t.boolean():n.dataType==="date"?l=r===!0||r.date?t.coerce.date():t.date():n.dataType==="string"?l=Sl(n,t,r):n.dataType==="json"?l=bl:n.dataType==="custom"?l=t.any():n.dataType==="buffer"&&(l=Nl)),l||(l=t.any()),l}function wl(n,e,t){let r=n.getSQLType().includes("unsigned"),l,o,d=!1;S(n,["MySqlTinyInt","SingleStoreTinyInt"])?(l=r?0:w.INT8_MIN,o=r?w.INT8_UNSIGNED_MAX:w.INT8_MAX,d=!0):S(n,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(l=r?0:w.INT16_MIN,o=r?w.INT16_UNSIGNED_MAX:w.INT16_MAX,d=!0):S(n,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(l=r?0:w.INT24_MIN,o=r?w.INT24_UNSIGNED_MAX:w.INT24_MAX,d=S(n,["MySqlMediumInt","SingleStoreMediumInt"])):S(n,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(l=r?0:w.INT32_MIN,o=r?w.INT32_UNSIGNED_MAX:w.INT32_MAX,d=!0):S(n,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(l=r?0:w.INT48_MIN,o=r?w.INT48_UNSIGNED_MAX:w.INT48_MAX):S(n,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||S(n,["MySqlSerial","SingleStoreSerial"]),l=r?0:Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,d=!0):S(n,["MySqlYear","SingleStoreYear"])?(l=1901,o=2155,d=!0):(l=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER);let y=t===!0||t!=null&&t.number?e.coerce.number():e.number();return y=y.min(l).max(o),d?y.int():y}function vl(n,e,t){const r=n.getSQLType().includes("unsigned"),l=r?0n:w.INT64_MIN,o=r?w.INT64_UNSIGNED_MAX:w.INT64_MAX;return(t===!0||t!=null&&t.bigint?e.coerce.bigint():e.bigint()).min(l).max(o)}function Sl(n,e,t){if(S(n,["PgUUID"]))return e.string().uuid();let r,l,o=!1;S(n,["PgVarchar","SQLiteText"])?r=n.length:S(n,["MySqlVarChar","SingleStoreVarChar"])?r=n.length??w.INT16_UNSIGNED_MAX:S(n,["MySqlText","SingleStoreText"])&&(n.textType==="longtext"?r=w.INT32_UNSIGNED_MAX:n.textType==="mediumtext"?r=w.INT24_UNSIGNED_MAX:n.textType==="text"?r=w.INT16_UNSIGNED_MAX:r=w.INT8_UNSIGNED_MAX),S(n,["PgChar","MySqlChar","SingleStoreChar"])&&(r=n.length,o=!0),S(n,["PgBinaryVector"])&&(l=/^[01]+$/,r=n.dimensions);let d=t===!0||t!=null&&t.string?e.coerce.string():e.string();return d=l?d.regex(l):d,r&&o?d.length(r):r?d.max(r):d}function ia(n){return ji(n)?$a(n):Ka(n)}function sa(n,e,t,r){const l={};for(const[o,d]of Object.entries(n)){if(!D(d,X)&&!D(d,T)&&!D(d,T.Aliased)&&typeof d=="object"){const M=ji(d)||Ra(d)?ia(d):d;l[o]=sa(M,e[o]??{},t,r);continue}const y=e[o];if(y!==void 0&&typeof y!="function"){l[o]=y;continue}const _=D(d,X)?d:void 0,N=_?ra(_,r):I.any(),c=typeof y=="function"?y(N):N;t.never(_)||(l[o]=c,_&&(t.nullable(_)&&(l[o]=l[o].nullable()),t.optional(_)&&(l[o]=l[o].optional())))}return I.object(l)}const Tl={never:n=>{var e,t;return((e=n==null?void 0:n.generated)==null?void 0:e.type)==="always"||((t=n==null?void 0:n.generatedIdentity)==null?void 0:t.type)==="always"},optional:n=>!n.notNull||n.notNull&&n.hasDefault,nullable:n=>!n.notNull},B=(n,e)=>{const t=ia(n);return sa(t,{},Tl)},V=v("users",{id:m("id").primaryKey().defaultRandom(),role:s("role",{enum:["platform_admin","company_admin","agent","client","customer","provider","admin"]}).notNull().default("customer"),name:s("name").notNull(),email:s("email").notNull().unique(),passwordHash:s("password_hash").notNull(),parentCompanyId:m("parent_company_id").references(()=>F.id,{onDelete:"cascade"}),isActive:h("is_active").default(!0).notNull(),lastActiveAt:p("last_active_at",{withTimezone:!0}),registrationDate:p("registration_date",{withTimezone:!0}).defaultNow().notNull(),lastLogin:p("last_login",{withTimezone:!0}),profileData:C("profile_data").default({}),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull()}),F=v("agencies",{id:m("id").primaryKey().defaultRandom(),agencyName:s("agency_name").notNull(),description:s("description"),licenseNumber:s("license_number"),verifiedStatus:h("verified_status").default(!1).notNull(),trustScore:g("trust_score").default(0),ownerId:m("owner_id").references(()=>V.id,{onDelete:"cascade"}).notNull(),supportedCompanyTypes:s("supported_company_types").array(),specializedRevenueRanges:s("specialized_revenue_ranges").array(),handlesRelocation:h("handles_relocation").default(!1),servicesOffered:s("services_offered").array(),hasValidLicense:h("has_valid_license").default(!1),averageRating:P("average_rating",{precision:3,scale:2}).default("0"),totalReviews:g("total_reviews").default(0),averageResponseTimeHours:P("average_response_time_hours",{precision:5,scale:2}).default("24"),profileCompleteness:P("profile_completeness",{precision:3,scale:2}).default("0"),expertQuestionnaireScore:g("expert_questionnaire_score").default(0),companySizeTier:s("company_size_tier").default("small"),partnerNetworkSize:g("partner_network_size").default(0),headerImage:s("header_image"),teamLanguages:s("team_languages").array(),employeeCount:g("employee_count"),googlePlaceId:s("google_place_id"),googleReviewsUrl:s("google_reviews_url"),provenExpertUrl:s("proven_expert_url"),trustpilotUrl:s("trustpilot_url"),lastReviewCheck:p("last_review_check",{withTimezone:!0}),calendarUrl:s("calendar_url"),email:s("email"),claimedBy:m("claimed_by").references(()=>V.id),priceTransparency:s("price_transparency",{enum:["vague","moderate","high","very_high"]}).default("moderate"),processingTimeDays:g("processing_time_days"),yearEstablished:g("year_established"),officialPartners:s("official_partners").array(),contactChannels:s("contact_channels").array(),communicationScore:P("communication_score",{precision:3,scale:2}).default("0"),reliabilityScore:P("reliability_score",{precision:3,scale:2}).default("0"),problemSolvingScore:P("problem_solving_score",{precision:3,scale:2}).default("0"),priceValueScore:P("price_value_score",{precision:3,scale:2}).default("0"),startingPrice:P("starting_price",{precision:10,scale:2}),priceCurrency:s("price_currency").default("AED"),priceInclusions:s("price_inclusions").array(),historicalApprovedMandates:g("historical_approved_mandates").default(0).notNull(),totalMandates:g("total_mandates").default(0).notNull(),brevoContactId:s("brevo_contact_id"),brevoCompanyId:s("brevo_company_id"),brevoDealId:s("brevo_deal_id"),crmSyncedAt:p("crm_synced_at",{withTimezone:!0}),crmSyncStatus:s("crm_sync_status",{enum:["ok","pending","failed"]}),crmSyncError:s("crm_sync_error"),providerCategory:s("provider_category",{enum:["company_formation","insurance_broker","legal_services","relocation_services","pro_services","financial_services"]}),pipelineStatus:s("pipeline_status",{enum:["incoming","review","approved","rejected","onboarding"]}).default("incoming"),previousStatus:s("previous_status"),normalizedEmail:s("normalized_email"),tradeRegNumber:s("trade_reg_number"),isDuplicate:h("is_duplicate").default(!1),duplicateOf:m("duplicate_of").references(()=>F.id),mergedAt:p("merged_at",{withTimezone:!0}),statusChangeLog:C("status_change_log").default([]),adminNotes:s("admin_notes"),verificationNotes:s("verification_notes"),rejectionReason:s("rejection_reason"),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:p("updated_at",{withTimezone:!0}).defaultNow().notNull()}),aa=v("vendors",{id:m("id").primaryKey().defaultRandom(),name:s("name").notNull(),companyType:s("company_type"),websiteUrl:s("website_url"),googlePlaceId:s("google_place_id"),trustpilotBusinessId:s("trustpilot_business_id"),provenexpertBusinessId:s("provenexpert_business_id"),currentScore:P("current_score",{precision:3,scale:2}).default("0.00"),lastScoreUpdate:p("last_score_update",{withTimezone:!0}),lastReviewSync:p("last_review_sync",{withTimezone:!0}),totalReviews:g("total_reviews").default(0),averageRating:P("average_rating",{precision:3,scale:2}).default("0.00"),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:p("updated_at",{withTimezone:!0}).defaultNow().notNull()}),jl=v("external_reviews",{id:m("id").primaryKey().defaultRandom(),agencyId:m("agency_id").references(()=>F.id,{onDelete:"cascade"}),vendorId:m("vendor_id").references(()=>aa.id,{onDelete:"cascade"}),source:s("source",{enum:["google","trustpilot","provenexpert"]}).notNull(),externalId:s("external_id").notNull(),externalReviewId:s("external_review_id"),rating:g("rating").notNull(),content:s("content"),reviewText:s("review_text"),authorName:s("author_name"),reviewerName:s("reviewer_name"),authorUrl:s("author_url"),authorPhoto:s("author_photo"),reviewDate:p("review_date",{withTimezone:!0}),language:s("language").default("en"),verified:h("verified").default(!1),isPositive:h("is_positive"),sentimentScore:P("sentiment_score",{precision:3,scale:2}),importedAt:p("imported_at",{withTimezone:!0}).defaultNow().notNull(),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull()});v("review_sync_log",{id:m("id").primaryKey().defaultRandom(),vendorId:m("vendor_id").references(()=>aa.id,{onDelete:"cascade"}),syncType:s("sync_type",{enum:["initial","scheduled","manual"]}).notNull(),reviewsFound:g("reviews_found").default(0),reviewsNew:g("reviews_new").default(0),syncStatus:s("sync_status",{enum:["success","partial","failed"]}).notNull(),errorMessage:s("error_message"),syncedAt:p("synced_at",{withTimezone:!0}).defaultNow().notNull()});const Pl=v("products",{id:m("id").primaryKey().defaultRandom(),providerId:m("provider_id").notNull().references(()=>V.id,{onDelete:"cascade"}),name:s("name").notNull(),description:s("description"),price:P("price",{precision:10,scale:2}).notNull(),status:s("status").notNull().default("active"),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:p("updated_at",{withTimezone:!0}).defaultNow().notNull()});v("orders",{id:m("id").primaryKey().defaultRandom(),customerId:m("customer_id").notNull().references(()=>V.id,{onDelete:"cascade"}),providerId:m("provider_id").notNull().references(()=>V.id,{onDelete:"cascade"}),productId:m("product_id").notNull().references(()=>Pl.id,{onDelete:"cascade"}),orderNumber:ne("order_number",{length:100}).notNull().unique(),status:s("status").notNull().default("pending"),totalAmount:P("total_amount",{precision:10,scale:2}).notNull(),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:p("updated_at",{withTimezone:!0}).defaultNow().notNull()});v("email_drafts",{id:m("id").primaryKey().defaultRandom(),recipientEmail:ne("recipient_email",{length:255}).notNull(),subject:ne("subject",{length:500}).notNull(),body:s("body").notNull(),status:s("status").notNull().default("draft"),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull(),sentAt:p("sent_at",{withTimezone:!0})});const Il=v("reviews",{id:m("id").primaryKey().defaultRandom(),agencyId:m("agency_id").references(()=>F.id,{onDelete:"cascade"}).notNull(),userId:m("user_id").references(()=>V.id,{onDelete:"cascade"}).notNull(),rating:g("rating").notNull(),text:s("text"),communicationRating:g("communication_rating"),reliabilityRating:g("reliability_rating"),problemSolvingRating:g("problem_solving_rating"),priceValueRating:g("price_value_rating"),wouldRecommend:h("would_recommend").default(!0),reviewerName:s("reviewer_name"),isVerified:h("is_verified").default(!1),status:s("status",{enum:["pending","approved","rejected"]}).default("pending").notNull(),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull()});v("external_reviews_legacy",{id:m("id").primaryKey().defaultRandom(),agencyId:m("agency_id").references(()=>F.id,{onDelete:"cascade"}).notNull(),source:s("source",{enum:["google","provenexpert","trustpilot","other"]}).notNull(),reviewerName:s("reviewer_name").notNull(),rating:g("rating").notNull(),text:s("text"),reviewDate:p("review_date",{withTimezone:!0}).notNull(),sourceUrl:s("source_url"),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull()});const Al=v("agency_claims",{id:m("id").primaryKey().defaultRandom(),agencyId:m("agency_id").references(()=>F.id,{onDelete:"cascade"}).notNull(),userId:m("user_id").references(()=>V.id,{onDelete:"set null"}),contactName:s("contact_name").notNull(),email:s("email").notNull(),phone:s("phone"),role:s("role").notNull(),message:s("message"),status:s("status",{enum:["pending","approved","rejected"]}).default("pending").notNull(),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull(),processedAt:p("processed_at",{withTimezone:!0})}),we=v("leads",{id:m("id").primaryKey().defaultRandom(),name:s("name").notNull(),email:s("email").notNull(),phone:s("phone"),company_name:s("company_name"),main_goals:s("main_goals").array(),has_existing_company:s("has_existing_company"),company_count:s("company_count"),consolidated_revenue:s("consolidated_revenue"),total_employees:s("total_employees"),has_international_structures:h("has_international_structures"),international_structures_desc:s("international_structures_desc"),current_legal_form:s("current_legal_form"),planned_structure:s("planned_structure"),planned_company_types:s("planned_company_types").array(),planned_employees:s("planned_employees"),shareholders:s("shareholders"),target_markets:s("target_markets"),industries:s("industries").array(),industry_details:s("industry_details"),budget_range:s("budget_range").notNull(),budget_details:s("budget_details"),needs_financing:h("needs_financing").default(!1),financing_type:s("financing_type"),is_discrete_budget:h("is_discrete_budget").default(!1),is_time_critical:h("is_time_critical").default(!1),deadline:p("deadline",{withTimezone:!0}),project_timeline:s("project_timeline"),needs_express_service:h("needs_express_service").default(!1),relocation_plan:s("relocation_plan"),family_status:s("family_status"),relocating_persons:s("relocating_persons"),has_school_children:h("has_school_children"),has_pets:h("has_pets"),current_tax_residence:s("current_tax_residence"),has_uae_experience:h("has_uae_experience").default(!1),uae_experience_level:s("uae_experience_level"),previous_providers:s("previous_providers").array(),preferred_provider_size:s("preferred_provider_size"),preferred_provider_nationalities:s("preferred_provider_nationalities").array(),blacklisted_providers:s("blacklisted_providers").array(),bad_experience_details:s("bad_experience_details"),preferred_service_model:s("preferred_service_model"),needs_24_support:h("needs_24_support").default(!1),needs_onsite_presence:h("needs_onsite_presence").default(!1),needs_dedicated_manager:h("needs_dedicated_manager").default(!1),needs_vip_service:h("needs_vip_service").default(!1),special_needs:s("special_needs").array(),nationality:s("nationality"),security_requirements:s("security_requirements"),compliance_data:C("compliance_data"),required_services:s("required_services").array(),main_reasons:s("main_reasons").array(),support_level:s("support_level"),matching_priorities:C("matching_priorities"),preferred_languages:s("preferred_languages").array(),contact_methods:s("contact_methods").array(),trust_importance:s("trust_importance"),wants_live_availability:h("wants_live_availability").default(!1),wants_direct_booking:h("wants_direct_booking").default(!1),special_requirements:s("special_requirements"),project_context:s("project_context"),user_id:m("user_id").references(()=>V.id,{onDelete:"cascade"}),status:s("status").default("new"),lead_score:g("lead_score"),lead_quality:s("lead_quality"),persona_type:s("persona_type"),matched_provider_ids:s("matched_provider_ids").array(),assigned_provider_ids:s("assigned_provider_ids").array(),wizard_entry_point:s("wizard_entry_point"),support_notes:s("support_notes"),brevoContactId:s("brevo_contact_id"),brevoDealId:s("brevo_deal_id"),crmSyncedAt:p("crm_synced_at",{withTimezone:!0}),crmSyncStatus:s("crm_sync_status",{enum:["ok","pending","failed"]}),crmSyncError:s("crm_sync_error"),created_at:p("created_at",{withTimezone:!0}).defaultNow().notNull(),updated_at:p("updated_at",{withTimezone:!0}).defaultNow().notNull()}),Dl=v("bookings",{id:m("id").primaryKey().defaultRandom(),agencyId:m("agency_id").references(()=>F.id,{onDelete:"cascade"}).notNull(),userId:m("user_id").references(()=>V.id,{onDelete:"cascade"}).notNull(),servicePackage:s("service_package").notNull(),price:P("price",{precision:10,scale:2}).notNull(),status:s("status",{enum:["pending","confirmed","in_progress","completed","cancelled"]}).default("pending").notNull(),bookingDate:p("booking_date",{withTimezone:!0}),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull()}),zl=v("user_favorites",{id:m("id").primaryKey().defaultRandom(),userId:m("user_id").references(()=>V.id,{onDelete:"cascade"}).notNull(),agencyId:m("agency_id").references(()=>F.id,{onDelete:"cascade"}).notNull(),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull()}),Cl=v("agency_stats",{id:m("id").primaryKey().defaultRandom(),agencyId:m("agency_id").references(()=>F.id,{onDelete:"cascade"}).notNull().unique(),totalViews:g("total_views").default(0).notNull(),totalContacts:g("total_contacts").default(0).notNull(),totalBookings:g("total_bookings").default(0).notNull(),monthlyViews:g("monthly_views").default(0).notNull(),monthlyContacts:g("monthly_contacts").default(0).notNull(),lastUpdated:p("last_updated",{withTimezone:!0}).defaultNow().notNull()});B(V).omit({id:!0,createdAt:!0});B(F).omit({id:!0,createdAt:!0});B(Il).omit({id:!0,createdAt:!0});const Vl=B(we).omit({id:!0,created_at:!0,updated_at:!0,lead_score:!0,lead_quality:!0,persona_type:!0});B(Dl).omit({id:!0,createdAt:!0});B(zl).omit({id:!0,createdAt:!0});v("notifications",{id:m("id").primaryKey().defaultRandom(),type:s("type").notNull(),title:s("title").notNull(),message:s("message").notNull(),data:C("data"),read:h("read").default(!1),created_at:p("created_at",{withTimezone:!0}).defaultNow().notNull()});v("alerts",{id:m("id").primaryKey().defaultRandom(),type:s("type").notNull(),title:s("title").notNull(),message:s("message").notNull(),priority:s("priority").default("medium"),data:C("data"),resolved:h("resolved").default(!1),resolved_at:p("resolved_at",{withTimezone:!0}),created_at:p("created_at",{withTimezone:!0}).defaultNow().notNull()});v("reports",{id:m("id").primaryKey().defaultRandom(),type:s("type").notNull(),title:s("title").notNull(),data:C("data").notNull(),created_at:p("created_at",{withTimezone:!0}).defaultNow().notNull()});B(Cl).omit({id:!0,lastUpdated:!0});B(jl).omit({id:!0,createdAt:!0});B(Al).omit({id:!0,createdAt:!0,processedAt:!0});const ve=v("agent_profiles",{id:m("id").primaryKey().defaultRandom(),userId:m("user_id").notNull().references(()=>V.id,{onDelete:"cascade"}),companyId:m("company_id").notNull().references(()=>F.id,{onDelete:"cascade"}),agentName:s("agent_name").notNull(),title:s("title"),specializations:s("specializations").array().notNull(),employmentType:s("employment_type",{enum:["employee","contractor","freelancer"]}).default("employee"),licenseNumbers:s("license_numbers").array(),certifications:C("certifications"),education:C("education"),yearsExperience:g("years_experience").default(0),languages:s("languages").array().default(["en"]),directEmail:s("direct_email"),directPhone:s("direct_phone"),availabilityCalendar:C("availability_calendar"),timezone:s("timezone").default("Asia/Dubai"),workingHours:C("working_hours"),personalBio:s("personal_bio"),expertiseAreas:s("expertise_areas").array(),serviceApproach:s("service_approach"),profileImageUrl:s("profile_image_url"),backgroundImageUrl:s("background_image_url"),totalClients:g("total_clients").default(0),totalReviews:g("total_reviews").default(0),averageRating:P("average_rating",{precision:3,scale:2}).default("0"),successRate:P("success_rate",{precision:5,scale:2}).default("0"),responseTimeHours:g("response_time_hours").default(24),isActive:h("is_active").default(!0),isFeatured:h("is_featured").default(!1),isVerified:h("is_verified").default(!1),verificationLevel:s("verification_level").default("basic"),visibilityLevel:s("visibility_level").default("public"),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:p("updated_at",{withTimezone:!0}).defaultNow().notNull(),lastActiveAt:p("last_active_at",{withTimezone:!0}).defaultNow()}),Bl=v("agent_reviews",{id:m("id").primaryKey().defaultRandom(),agentId:m("agent_id").notNull().references(()=>ve.id,{onDelete:"cascade"}),clientId:m("client_id").notNull().references(()=>V.id,{onDelete:"set null"}),leadId:m("lead_id").references(()=>we.id,{onDelete:"set null"}),rating:g("rating").notNull(),reviewTitle:s("review_title"),reviewText:s("review_text"),serviceType:s("service_type"),projectValueRange:s("project_value_range"),communicationRating:g("communication_rating"),expertiseRating:g("expertise_rating"),timelinessRating:g("timeliness_rating"),valueRating:g("value_rating"),isVerified:h("is_verified").default(!1),isFeatured:h("is_featured").default(!1),helpfulVotes:g("helpful_votes").default(0),responseFromAgent:s("response_from_agent"),responseDate:p("response_date",{withTimezone:!0}),isApproved:h("is_approved").default(!0),moderationNotes:s("moderation_notes"),flaggedCount:g("flagged_count").default(0),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:p("updated_at",{withTimezone:!0}).defaultNow().notNull()}),Fl=v("lead_assignments",{id:m("id").primaryKey().defaultRandom(),leadId:m("lead_id").notNull().references(()=>we.id,{onDelete:"cascade"}),agentId:m("agent_id").notNull().references(()=>ve.id,{onDelete:"cascade"}),companyId:m("company_id").notNull().references(()=>F.id,{onDelete:"cascade"}),assignedBy:m("assigned_by").references(()=>V.id),assignmentType:s("assignment_type",{enum:["automatic","manual","client_selected"]}).notNull(),assignmentReason:s("assignment_reason"),priorityLevel:g("priority_level").default(1),status:s("status",{enum:["pending","accepted","declined","in_progress","completed","cancelled"]}).default("pending"),responseDeadline:p("response_deadline",{withTimezone:!0}),acceptedAt:p("accepted_at",{withTimezone:!0}),completedAt:p("completed_at",{withTimezone:!0}),initialMessage:s("initial_message"),clientNotes:s("client_notes"),agentNotes:s("agent_notes"),responseTimeMinutes:g("response_time_minutes"),conversionOutcome:s("conversion_outcome"),estimatedValue:P("estimated_value",{precision:10,scale:2}),actualValue:P("actual_value",{precision:10,scale:2}),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:p("updated_at",{withTimezone:!0}).defaultNow().notNull()}),ql=v("company_agent_settings",{id:m("id").primaryKey().defaultRandom(),companyId:m("company_id").notNull().references(()=>F.id,{onDelete:"cascade"}),autoAssignLeads:h("auto_assign_leads").default(!0),assignmentAlgorithm:s("assignment_algorithm").default("round_robin"),maxLeadsPerAgentDaily:g("max_leads_per_agent_daily").default(10),requireAgentAcceptance:h("require_agent_acceptance").default(!0),responseTimeSlaHours:g("response_time_sla_hours").default(24),requireProfileApproval:h("require_profile_approval").default(!0),minimumExperienceYears:g("minimum_experience_years").default(0),requiredCertifications:s("required_certifications").array(),performanceReviewFrequency:s("performance_review_frequency").default("quarterly"),companyEmailTemplate:s("company_email_template"),agentSignatureTemplate:s("agent_signature_template"),brandGuidelines:C("brand_guidelines"),profileTemplate:C("profile_template"),agentsCanEditProfile:h("agents_can_edit_profile").default(!0),agentsCanViewCompanyStats:h("agents_can_view_company_stats").default(!1),agentsCanMessageDirectly:h("agents_can_message_directly").default(!0),createdAt:p("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:p("updated_at",{withTimezone:!0}).defaultNow().notNull()});B(ve).omit({id:!0,createdAt:!0,updatedAt:!0,lastActiveAt:!0});B(Bl).omit({id:!0,createdAt:!0,updatedAt:!0});B(Fl).omit({id:!0,createdAt:!0,updatedAt:!0});B(ql).omit({id:!0,createdAt:!0,updatedAt:!0});const Ll=Vl.extend({name:I.string().min(2,"Name muss mindestens 2 Zeichen lang sein"),email:I.string().email("Bitte geben Sie eine gültige E-Mail-Adresse ein"),phone:I.string().optional(),message:I.string().optional()});function Ml({onSuccess:n}){const{toast:e}=da(),t=ma({resolver:ha(Ll),defaultValues:{name:"",email:"",phone:"",company_type:void 0,revenue_range:void 0,relocation_plan:void 0,support_needs:[],message:""}}),r=pa({mutationFn:async o=>{const d={userId:"anonymous",company_type:o.company_type,revenue_range:o.revenue_range,relocation_plan:o.relocation_plan,support_needs:o.support_needs};return ya("POST","/api/leads",d)},onSuccess:()=>{e({title:"Anfrage erfolgreich gesendet!",description:"Wir werden uns in Kürze bei Ihnen melden."}),t.reset(),_a.invalidateQueries({queryKey:["/api/leads"]}),n==null||n()},onError:o=>{e({title:"Fehler beim Senden der Anfrage",description:o.message||"Bitte versuchen Sie es später erneut.",variant:"destructive"})}}),l=[{value:"visa",label:"Visa & Aufenthalt"},{value:"banking",label:"Banking & Finanzierung"},{value:"legal",label:"Rechtsberatung"},{value:"accounting",label:"Buchhaltung"},{value:"office",label:"Büro & Standort"},{value:"tax",label:"Steuerberatung"},{value:"startup",label:"Startup Support"}];return a.jsx(ga,{...t,children:a.jsxs("form",{onSubmit:t.handleSubmit(o=>r.mutate(o)),className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(E,{control:t.control,name:"name",render:({field:o})=>a.jsxs(U,{children:[a.jsx(Q,{children:"Name *"}),a.jsx(R,{children:a.jsx(se,{placeholder:"Max Mustermann",...o})}),a.jsx($,{})]})}),a.jsx(E,{control:t.control,name:"email",render:({field:o})=>a.jsxs(U,{children:[a.jsx(Q,{children:"E-Mail *"}),a.jsx(R,{children:a.jsx(se,{type:"email",placeholder:"max@beispiel.de",...o})}),a.jsx($,{})]})})]}),a.jsx(E,{control:t.control,name:"phone",render:({field:o})=>a.jsxs(U,{children:[a.jsx(Q,{children:"Telefon (optional)"}),a.jsx(R,{children:a.jsx(se,{placeholder:"+49 123 456789",...o})}),a.jsx($,{})]})}),a.jsx(E,{control:t.control,name:"company_type",render:({field:o})=>a.jsxs(U,{children:[a.jsx(Q,{children:"Welche Art von Unternehmen möchten Sie gründen?"}),a.jsxs(de,{onValueChange:o.onChange,defaultValue:o.value??void 0,children:[a.jsx(R,{children:a.jsx(me,{children:a.jsx(pe,{placeholder:"Bitte wählen..."})})}),a.jsxs(ge,{children:[a.jsx(q,{value:"",children:"Keine Auswahl"}),a.jsx(q,{value:"freezone",children:"Freezone Company"}),a.jsx(q,{value:"mainland",children:"Mainland Company"}),a.jsx(q,{value:"offshore",children:"Offshore Company"})]})]}),a.jsx($,{})]})}),a.jsx(E,{control:t.control,name:"revenue_range",render:({field:o})=>a.jsxs(U,{children:[a.jsx(Q,{children:"Erwarteter Jahresumsatz"}),a.jsxs(de,{onValueChange:o.onChange,defaultValue:o.value??void 0,children:[a.jsx(R,{children:a.jsx(me,{children:a.jsx(pe,{placeholder:"Bitte wählen..."})})}),a.jsxs(ge,{children:[a.jsx(q,{value:"<100000",children:"Unter 100.000 USD"}),a.jsx(q,{value:"100000-500000",children:"100.000 - 500.000 USD"}),a.jsx(q,{value:"500000-1000000",children:"500.000 - 1.000.000 USD"}),a.jsx(q,{value:">1000000",children:"Über 1.000.000 USD"})]})]}),a.jsx($,{})]})}),a.jsx(E,{control:t.control,name:"relocation_plan",render:({field:o})=>a.jsxs(U,{children:[a.jsx(Q,{children:"Planen Sie eine Übersiedlung nach Dubai?"}),a.jsxs(de,{onValueChange:o.onChange,defaultValue:o.value??void 0,children:[a.jsx(R,{children:a.jsx(me,{children:a.jsx(pe,{placeholder:"Bitte wählen..."})})}),a.jsxs(ge,{children:[a.jsx(q,{value:"immediately",children:"Ja, sofort"}),a.jsx(q,{value:"within_6_months",children:"Ja, innerhalb von 6 Monaten"}),a.jsx(q,{value:"within_year",children:"Ja, innerhalb eines Jahres"}),a.jsx(q,{value:"no",children:"Nein"})]})]}),a.jsx($,{})]})}),a.jsx(E,{control:t.control,name:"support_needs",render:()=>a.jsxs(U,{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx(Q,{className:"text-base",children:"Welche Services benötigen Sie?"}),a.jsx(fa,{children:"Wählen Sie alle zutreffenden Services aus."})]}),l.map(o=>a.jsx(E,{control:t.control,name:"support_needs",render:({field:d})=>{var y;return a.jsxs(U,{className:"flex flex-row items-start space-x-3 space-y-0",children:[a.jsx(R,{children:a.jsx(Ca,{checked:(y=d.value)==null?void 0:y.includes(o.value),onCheckedChange:_=>{var N;return _?d.onChange([...d.value||[],o.value]):d.onChange(((N=d.value)==null?void 0:N.filter(c=>c!==o.value))||[])}})}),a.jsx(Q,{className:"font-normal",children:o.label})]},o.value)}},o.value)),a.jsx($,{})]})}),a.jsx(E,{control:t.control,name:"message",render:({field:o})=>a.jsxs(U,{children:[a.jsx(Q,{children:"Nachricht (optional)"}),a.jsx(R,{children:a.jsx(za,{placeholder:"Teilen Sie uns weitere Details zu Ihrem Vorhaben mit...",className:"resize-none",...o})}),a.jsx($,{})]})}),a.jsx(yi,{type:"submit",className:"w-full touch-target h-12 text-base font-semibold",disabled:r.isPending,children:r.isPending?a.jsxs(a.Fragment,{children:[a.jsx(Ba,{className:"mr-2 h-5 w-5 animate-spin"}),"Sende Anfrage..."]}):"Anfrage senden"})]})})}function Xl(){const[n,e]=xa.useState(null),t=[{id:"investor",title:"Investor Visa",icon:Se,duration:"2-10 Jahre",investment:"Ab AED 750.000",description:"Für Unternehmer und Investoren",benefits:["Aufenthaltsgenehmigung für Familie","Keine Mindestaufenthaltspflicht","Geschäftsmöglichkeiten in Dubai","Steuervorteile"],requirements:["Geschäftsplan oder Investitionsnachweis","Kapitalnachweis","Keine Vorstrafen","Gesundheitszeugnis"],processing:"4-6 Wochen"},{id:"golden",title:"Golden Visa",icon:ja,duration:"5-10 Jahre",investment:"Ab AED 2 Mio.",description:"Premium Langzeitvisum",benefits:["10 Jahre Aufenthalt","100% Geschäftseigentum","Keine Sponsor erforderlich","Familie eingeschlossen"],requirements:["Immobilieninvestition oder","Geschäftsinvestition oder","Besondere Talente/Fähigkeiten","Finanznachweis"],processing:"2-4 Wochen"},{id:"freelance",title:"Freelance Visa",icon:Pa,duration:"1-3 Jahre",investment:"Ab AED 7.500",description:"Für Selbstständige",benefits:["Arbeiten als Freelancer","Eigenes Bankkonto","Sponsoring von Familie möglich","Flexible Arbeitsbedingungen"],requirements:["Nachweis der Qualifikation","Portfolio/Referenzen","Einkommensnachweis","Krankenversicherung"],processing:"2-3 Wochen"},{id:"employment",title:"Employment Visa",icon:Se,duration:"2-3 Jahre",investment:"Arbeitgeber-gesponsert",description:"Für Angestellte",benefits:["Arbeitserlaubnis","Aufenthaltsgenehmigung","Familie sponsern möglich","Krankenversicherung oft inkl."],requirements:["Arbeitsvertrag","Bildungsnachweise","Gesundheitszeugnis","Arbeitgebersponsoring"],processing:"2-4 Wochen"},{id:"student",title:"Student Visa",icon:Va,duration:"1 Jahr (verlängerbar)",investment:"Universitätsgebühren",description:"Für Studenten",benefits:["Studium in Dubai","Teilzeitarbeit möglich","Moderne Bildungseinrichtungen","Internationale Abschlüsse"],requirements:["Universitätszulassung","Finanznachweis","Vorherige Abschlüsse","Sprachnachweis"],processing:"3-4 Wochen"},{id:"retirement",title:"Retirement Visa",icon:Ia,duration:"5 Jahre",investment:"Einkommensnachweis",description:"Für Rentner ab 55",benefits:["Langzeitaufenthalt","Keine Arbeitspflicht","Hochwertige Gesundheitsversorgung","Steuerfrei leben"],requirements:["Mindestalter 55 Jahre","Monatseinkommen AED 20.000 oder","Ersparnisse AED 1 Mio. oder","Immobilie AED 2 Mio."],processing:"4-6 Wochen"}],r=[{title:"Beratung",description:"Kostenloses Erstgespräch"},{title:"Dokumenten-Check",description:"Prüfung aller Unterlagen"},{title:"Antragstellung",description:"Einreichung bei Behörden"},{title:"Bearbeitung",description:"Verfolgung des Status"},{title:"Genehmigung",description:"Visa-Ausstellung"},{title:"Nachbetreuung",description:"Emirates ID & mehr"}];return a.jsxs("div",{className:"min-h-screen pt-20 pb-16",children:[a.jsx("section",{className:"bg-gradient-to-br from-primary/10 to-primary/5 py-16",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center max-w-3xl mx-auto",children:[a.jsx(ba,{className:"w-16 h-16 text-primary mx-auto mb-6"}),a.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Dubai Visa Beratung für Deutsche"}),a.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Ihr Weg zum Leben und Arbeiten in Dubai - professionelle Beratung für alle Visa-Typen mit deutschsprachigen Experten"}),a.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[a.jsxs(Y,{variant:"secondary",className:"px-4 py-2",children:[a.jsx(Na,{className:"w-4 h-4 mr-2"}),"Alle Visa-Typen"]}),a.jsxs(Y,{variant:"secondary",className:"px-4 py-2",children:[a.jsx(wa,{className:"w-4 h-4 mr-2"}),"Schnelle Bearbeitung"]}),a.jsxs(Y,{variant:"secondary",className:"px-4 py-2",children:[a.jsx(va,{className:"w-4 h-4 mr-2"}),"100% Erfolgsquote"]})]})]})})}),a.jsx("section",{className:"py-16 bg-white",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs(W.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[a.jsx("h2",{className:"text-3xl font-bold text-center mb-4",children:"Wählen Sie Ihr Visum"}),a.jsx("p",{className:"text-center text-gray-600 mb-12 max-w-2xl mx-auto",children:"Verschiedene Visa-Optionen für unterschiedliche Bedürfnisse - finden Sie das passende Visum für Ihre Situation"}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((l,o)=>{const d=l.icon;return a.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},children:a.jsxs(ae,{className:"h-full hover:shadow-xl transition-all duration-300 cursor-pointer border-2",onClick:()=>e(l.id),children:[a.jsxs(le,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(d,{className:"w-10 h-10 text-primary"}),a.jsx(Y,{variant:"outline",children:l.duration})]}),a.jsx(oe,{className:"text-xl",children:l.title}),a.jsx(ue,{children:l.description})]}),a.jsx(ce,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Investment:"}),a.jsx("span",{className:"font-semibold",children:l.investment})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Bearbeitung:"}),a.jsx("span",{className:"font-semibold",children:l.processing})]}),a.jsx(yi,{className:"w-full mt-4",variant:n===l.id?"default":"outline",children:"Mehr erfahren"})]})})]})},l.id)})})]})})}),n&&a.jsx("section",{className:"py-16 bg-gray-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.filter(l=>l.id===n).map(l=>a.jsx(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:a.jsxs(ae,{className:"max-w-4xl mx-auto",children:[a.jsx(le,{children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(l.icon,{className:"w-12 h-12 text-primary"}),a.jsxs("div",{children:[a.jsx(oe,{className:"text-2xl",children:l.title}),a.jsx(ue,{className:"text-lg",children:l.description})]})]})}),a.jsx(ce,{children:a.jsxs(Aa,{defaultValue:"benefits",className:"w-full",children:[a.jsxs(Da,{className:"grid w-full grid-cols-2",children:[a.jsx(Te,{value:"benefits",children:"Vorteile"}),a.jsx(Te,{value:"requirements",children:"Anforderungen"})]}),a.jsx(je,{value:"benefits",className:"mt-6",children:a.jsx("ul",{className:"space-y-3",children:l.benefits.map((o,d)=>a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx(Sa,{className:"w-5 h-5 text-green-500 mt-0.5"}),a.jsx("span",{children:o})]},d))})}),a.jsx(je,{value:"requirements",className:"mt-6",children:a.jsx("ul",{className:"space-y-3",children:l.requirements.map((o,d)=>a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx(Ta,{className:"w-5 h-5 text-primary mt-0.5"}),a.jsx("span",{children:o})]},d))})})]})})]})},l.id))})}),a.jsx("section",{className:"py-16 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Unser Visa-Prozess"}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:r.map((l,o)=>a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-2xl font-bold text-primary",children:o+1})}),a.jsx("h3",{className:"font-semibold mb-2",children:l.title}),a.jsx("p",{className:"text-sm text-gray-600",children:l.description})]},o))})]})}),a.jsx("section",{className:"py-16 bg-gradient-to-br from-primary to-primary/80 text-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[a.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Starten Sie Ihre Dubai-Reise heute"}),a.jsx("p",{className:"text-xl mb-8 opacity-90 max-w-2xl mx-auto",children:"Kostenlose Erstberatung mit unseren deutschsprachigen Visa-Experten. Wir begleiten Sie durch den gesamten Prozess."}),a.jsxs(ae,{className:"max-w-md mx-auto bg-white text-gray-900",children:[a.jsxs(le,{children:[a.jsx(oe,{children:"Kostenlose Visa-Beratung"}),a.jsx(ue,{children:"Lassen Sie uns Ihre Visa-Optionen besprechen"})]}),a.jsx(ce,{children:a.jsx(Ml,{})})]})]})})]})}export{Xl as default};
