import{aa as b,r as m,j as e,g as o,N as h,_ as E,O as x,a1 as u,P as j,a9 as t,I as c,S as k,aB as r,B as C}from"./index-48Pj72Q3.js";import{A as w}from"./AdminNavbar-BRSFIyKQ.js";import{T as B}from"./textarea-BLf_nyzL.js";import{B as A}from"./bell-D-J5xLDD.js";import{D}from"./database-BOZJpUBh.js";import{S as M}from"./save-BUVjkkhT.js";import"./building--oeWMnIm.js";import"./sun-DOAyt5el.js";function K(){const[,l]=b(),[y,p]=m.useState(!1),[a,v]=m.useState({siteName:"TrustedSetup24",siteDescription:"Dubai Business Setup Plattform",maintenanceMode:!1,userRegistration:!0,emailNotifications:!0,smsNotifications:!1,backupEnabled:!0,analyticsEnabled:!0,maxUploadSize:"10",sessionTimeout:"24",adminEmail:"admin@trustedsetup24.com",supportEmail:"support@trustedsetup24.com"}),[g,N]=m.useState(!1);m.useEffect(()=>{(async()=>{var d;try{const n=localStorage.getItem("user");n&&JSON.parse(n).role==="admin"&&p(!0);const f=await fetch("/api/auth/me",{credentials:"include"});if(!f.ok){localStorage.removeItem("user"),sessionStorage.clear(),l("/login");return}if(((d=(await f.json()).user)==null?void 0:d.role)!=="admin"){localStorage.removeItem("user"),sessionStorage.clear(),l("/login");return}p(!0)}catch(n){console.error("Auth check failed:",n),l("/login")}})()},[l]);const S=async()=>{N(!0),setTimeout(()=>{N(!1),console.log("Settings saved successfully")},1500)},i=(s,d)=>{v(n=>({...n,[s]:d}))};return y?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(w,{}),e.jsx("div",{className:"pt-16 sm:pt-20",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"System-Einstellungen"}),e.jsx("p",{className:"text-gray-600",children:"Konfigurieren Sie die Plattform-Einstellungen"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{children:[e.jsxs(h,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-primary"}),e.jsx(x,{children:"Allgemeine Einstellungen"})]}),e.jsx(u,{children:"Grundlegende Konfiguration der Plattform"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"siteName",children:"Seitenname"}),e.jsx(c,{id:"siteName",value:a.siteName,onChange:s=>i("siteName",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"adminEmail",children:"Admin E-Mail"}),e.jsx(c,{id:"adminEmail",type:"email",value:a.adminEmail,onChange:s=>i("adminEmail",s.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"siteDescription",children:"Seitenbeschreibung"}),e.jsx(B,{id:"siteDescription",value:a.siteDescription,onChange:s=>i("siteDescription",s.target.value),rows:3})]})]})]}),e.jsxs(o,{children:[e.jsxs(h,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-primary"}),e.jsx(x,{children:"Sicherheits-Einstellungen"})]}),e.jsx(u,{children:"Sicherheit und Zugriffskontrollen verwalten"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"sessionTimeout",children:"Session Timeout (Stunden)"}),e.jsx(c,{id:"sessionTimeout",type:"number",value:a.sessionTimeout,onChange:s=>i("sessionTimeout",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"maxUploadSize",children:"Max. Upload-Größe (MB)"}),e.jsx(c,{id:"maxUploadSize",type:"number",value:a.maxUploadSize,onChange:s=>i("maxUploadSize",s.target.value)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{children:"Wartungsmodus"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Seite für Wartungsarbeiten sperren"})]}),e.jsx(r,{checked:a.maintenanceMode,onCheckedChange:s=>i("maintenanceMode",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{children:"Benutzerregistrierung"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Neue Benutzerregistrierungen erlauben"})]}),e.jsx(r,{checked:a.userRegistration,onCheckedChange:s=>i("userRegistration",s)})]})]})]})]}),e.jsxs(o,{children:[e.jsxs(h,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-primary"}),e.jsx(x,{children:"Benachrichtigungs-Einstellungen"})]}),e.jsx(u,{children:"E-Mail und SMS Benachrichtigungen konfigurieren"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"supportEmail",children:"Support E-Mail"}),e.jsx(c,{id:"supportEmail",type:"email",value:a.supportEmail,onChange:s=>i("supportEmail",s.target.value)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{children:"E-Mail Benachrichtigungen"}),e.jsx("p",{className:"text-sm text-gray-600",children:"System-E-Mails an Administratoren senden"})]}),e.jsx(r,{checked:a.emailNotifications,onCheckedChange:s=>i("emailNotifications",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{children:"SMS Benachrichtigungen"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Wichtige Benachrichtigungen per SMS"})]}),e.jsx(r,{checked:a.smsNotifications,onCheckedChange:s=>i("smsNotifications",s)})]})]})]})]}),e.jsxs(o,{children:[e.jsxs(h,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-primary"}),e.jsx(x,{children:"System-Einstellungen"})]}),e.jsx(u,{children:"Backup, Analytics und weitere System-Features"})]}),e.jsx(j,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{children:"Automatische Backups"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tägliche Datenbank-Sicherungen erstellen"})]}),e.jsx(r,{checked:a.backupEnabled,onCheckedChange:s=>i("backupEnabled",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{children:"Analytics aktiviert"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Benutzerverhalten und Performance-Daten sammeln"})]}),e.jsx(r,{checked:a.analyticsEnabled,onCheckedChange:s=>i("analyticsEnabled",s)})]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(C,{onClick:S,disabled:g,className:"min-w-[120px]",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Speichern..."]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Speichern"]})})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Authentifizierung wird überprüft..."})]})})}export{K as default};
