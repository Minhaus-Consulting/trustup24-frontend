import{c as j,aa as S,r as l,j as e,g as n,P as i,Y as g,S as p,e as B,I as U,B as t,N as D,O as M,f as v,Z as E}from"./index-48Pj72Q3.js";import{A as N}from"./AdminNavbar-BRSFIyKQ.js";import{S as R}from"./square-pen-HsYnCjq5.js";import"./building--oeWMnIm.js";import"./sun-DOAyt5el.js";import"./bell-D-J5xLDD.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=j("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=j("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=j("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);function G(){const[,x]=S(),[c,u]=l.useState(!1),[o,k]=l.useState(""),[r,m]=l.useState("all"),[K,w]=l.useState([]),[b,A]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const a=await fetch("/api/auth/me");if(!a.ok){x("/login");return}(await a.json()).role!=="admin"&&x("/login")}catch{x("/login")}})(),z()},[x]);const z=async()=>{try{const s=await fetch("/api/admin/users");if(s.ok){const a=await s.json();w(a.data||[])}}catch(s){console.error("Failed to load users:",s)}finally{A(!1)}},d=[{id:"1",name:"Max Mustermann",email:"max@example.com",role:"client",isActive:!0,createdAt:"2024-01-15",lastLogin:"2024-01-20"},{id:"2",name:"Emirates Business Setup",email:"contact@emirates-setup.com",role:"agency",isActive:!0,createdAt:"2024-01-10",lastLogin:"2024-01-19"},{id:"3",name:"Admin User",email:"admin@trustup24.com",role:"admin",isActive:!0,createdAt:"2024-01-01",lastLogin:"2024-01-20"}],h=d.filter(s=>{const a=s.name.toLowerCase().includes(o.toLowerCase())||s.email.toLowerCase().includes(o.toLowerCase()),y=r==="all"||s.role===r;return a&&y}),C=s=>{const a={admin:"destructive",agency:"default",client:"secondary"};return e.jsx(v,{variant:a[s]||"default",children:s})},L=s=>{switch(s){case"admin":return e.jsx(p,{className:"w-4 h-4"});case"agency":return e.jsx(f,{className:"w-4 h-4"});default:return e.jsx(g,{className:"w-4 h-4"})}};return b?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(N,{darkMode:c,onDarkModeToggle:()=>u(!c)}),e.jsx("div",{className:"pt-20 pb-8 px-4 max-w-7xl mx-auto",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),[1,2,3,4].map(s=>e.jsx("div",{className:"h-20 bg-gray-200 rounded"},s))]})})]}):e.jsxs("div",{className:`min-h-screen bg-gray-50 dark:bg-gray-900 ${c?"dark":""}`,children:[e.jsx(N,{darkMode:c,onDarkModeToggle:()=>u(!c)}),e.jsxs("div",{className:"pt-20 pb-8 px-4 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Benutzerverwaltung"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Verwaltung aller Benutzer, Anbieter und Administratoren"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(n,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"w-8 h-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gesamt Nutzer"})]})]})})}),e.jsx(n,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"w-8 h-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.filter(s=>s.role==="agency").length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Anbieter"})]})]})})}),e.jsx(n,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{className:"w-8 h-8 text-purple-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.filter(s=>s.role==="client").length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Kunden"})]})]})})}),e.jsx(n,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"w-8 h-8 text-red-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.filter(s=>s.role==="admin").length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Admins"})]})]})})})]}),e.jsx(n,{className:"mb-6",children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(U,{type:"text",placeholder:"Benutzer suchen...",value:o,onChange:s=>k(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{variant:r==="all"?"default":"outline",size:"sm",onClick:()=>m("all"),children:"Alle"}),e.jsx(t,{variant:r==="client"?"default":"outline",size:"sm",onClick:()=>m("client"),children:"Kunden"}),e.jsx(t,{variant:r==="agency"?"default":"outline",size:"sm",onClick:()=>m("agency"),children:"Anbieter"}),e.jsx(t,{variant:r==="admin"?"default":"outline",size:"sm",onClick:()=>m("admin"),children:"Admins"})]})]})})}),e.jsxs(n,{children:[e.jsx(D,{children:e.jsxs(M,{children:["Benutzer (",h.length,")"]})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[h.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[L(s.role),C(s.role)]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.email}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Registriert: ",new Date(s.createdAt).toLocaleDateString("de-DE")]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Letzter Login: ",new Date(s.lastLogin).toLocaleDateString("de-DE")]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{variant:s.isActive?"default":"secondary",children:s.isActive?"Aktiv":"Inaktiv"}),e.jsx(t,{variant:"ghost",size:"sm",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx(t,{variant:"ghost",size:"sm",children:e.jsx(E,{className:"w-4 h-4"})}),s.role!=="admin"&&e.jsx(t,{variant:"ghost",size:"sm",className:"text-red-600",children:e.jsx(I,{className:"w-4 h-4"})})]})]},s.id)),h.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(g,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Keine Benutzer gefunden"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Keine Benutzer entsprechen den aktuellen Filtern."})]})]})})]})]})]})}export{G as default};
