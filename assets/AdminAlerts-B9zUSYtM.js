import{aa as R,r as m,j as e,g as r,P as i,V as v,e as I,I as z,B as l,f as p}from"./index-wr2dCn2t.js";import{a as B,A as y}from"./AdminNavbar-CFcbAGb8.js";import{C as N}from"./circle-x-CeKVf9aR.js";import{T as w}from"./triangle-alert-DaKNZL7v.js";import{B as g}from"./bell-Bt3n6wl1.js";import{E}from"./eye-B4s1h9ML.js";import"./building-Dbe15So8.js";import"./sun-BB9LCqXH.js";function Q(){const[,d]=R(),[n,j]=m.useState(!1),[o,k]=m.useState(""),[t,x]=m.useState("all"),{alerts:h,loading:b,markAsRead:S}=B();m.useEffect(()=>{(async()=>{try{const a=await fetch("/api/auth/me");if(!a.ok){d("/login");return}(await a.json()).role!=="admin"&&d("/login")}catch{d("/login")}})()},[d]);const A=s=>{switch(s){case"critical":return e.jsx(N,{className:"w-5 h-5 text-red-500"});case"warning":return e.jsx(w,{className:"w-5 h-5 text-yellow-500"});case"info":return e.jsx(v,{className:"w-5 h-5 text-blue-500"});default:return e.jsx(g,{className:"w-5 h-5 text-gray-500"})}},C=s=>{const a={critical:"destructive",warning:"secondary",info:"default"};return e.jsx(p,{variant:a[s]||"default",children:s})},c=[{id:"1",severity:"critical",message:"Datenbank Response-Zeit über 5 Sekunden",timestamp:new Date(Date.now()-3e5).toISOString(),isRead:!1,action:"check_database"},{id:"2",severity:"warning",message:"Hohe Anzahl von Login-Versuchen festgestellt",timestamp:new Date(Date.now()-9e5).toISOString(),isRead:!1,action:"review_security"},{id:"3",severity:"info",message:"Backup erfolgreich abgeschlossen",timestamp:new Date(Date.now()-18e5).toISOString(),isRead:!0},{id:"4",severity:"warning",message:"Speicherplatz unter 20%",timestamp:new Date(Date.now()-36e5).toISOString(),isRead:!0,action:"cleanup_storage"}],u=c.filter(s=>{const a=s.message.toLowerCase().includes(o.toLowerCase()),f=t==="all"||s.severity===t;return a&&f}),D=async s=>{try{await S(s)}catch(a){console.error("Failed to mark alert as read:",a)}};return b?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(y,{darkMode:n,onDarkModeToggle:()=>j(!n)}),e.jsx("div",{className:"pt-20 pb-8 px-4 max-w-7xl mx-auto",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),[1,2,3,4].map(s=>e.jsx("div",{className:"h-20 bg-gray-200 rounded"},s))]})})]}):e.jsxs("div",{className:`min-h-screen bg-gray-50 dark:bg-gray-900 ${n?"dark":""}`,children:[e.jsx(y,{alertCount:(h==null?void 0:h.unread)||0,darkMode:n,onDarkModeToggle:()=>j(!n)}),e.jsxs("div",{className:"pt-20 pb-8 px-4 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"System Alerts"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Überwachung und Verwaltung aller Systembenachrichtigungen"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(r,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"w-8 h-8 text-red-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.filter(s=>s.severity==="critical").length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Critical"})]})]})})}),e.jsx(r,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"w-8 h-8 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.filter(s=>s.severity==="warning").length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Warning"})]})]})})}),e.jsx(r,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"w-8 h-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.filter(s=>s.severity==="info").length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Info"})]})]})})}),e.jsx(r,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"w-8 h-8 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.filter(s=>!s.isRead).length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Unread"})]})]})})})]}),e.jsx(r,{className:"mb-6",children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(z,{type:"text",placeholder:"Alerts suchen...",value:o,onChange:s=>k(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:t==="all"?"default":"outline",size:"sm",onClick:()=>x("all"),children:"Alle"}),e.jsx(l,{variant:t==="critical"?"destructive":"outline",size:"sm",onClick:()=>x("critical"),children:"Critical"}),e.jsx(l,{variant:t==="warning"?"secondary":"outline",size:"sm",onClick:()=>x("warning"),children:"Warning"}),e.jsx(l,{variant:t==="info"?"default":"outline",size:"sm",onClick:()=>x("info"),children:"Info"})]})]})})}),e.jsxs("div",{className:"space-y-4",children:[u.map(s=>e.jsx(r,{className:`${s.isRead?"opacity-75":""}`,children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[A(s.severity),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[C(s.severity),!s.isRead&&e.jsx(p,{variant:"outline",className:"text-xs",children:"Unread"})]}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium mb-1",children:s.message}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(s.timestamp).toLocaleString("de-DE")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!s.isRead&&e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>D(s.id),className:"gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Als gelesen markieren"]}),s.action&&e.jsx(l,{variant:"outline",size:"sm",children:"Aktion"})]})]})})},s.id)),u.length===0&&e.jsx(r,{children:e.jsxs(i,{className:"p-12 text-center",children:[e.jsx(g,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Keine Alerts gefunden"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o||t!=="all"?"Keine Alerts entsprechen den aktuellen Filtern.":"Keine Alerts vorhanden. Das System läuft stabil."})]})})]})]})]})}export{Q as default};
