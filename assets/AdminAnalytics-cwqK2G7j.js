import{aa as A,r as m,j as e,B as x,g as r,P as t,Y as C,a2 as v,a7 as D,a8 as T,N as c,O as d,ae as h,f as u}from"./index-wr2dCn2t.js";import{u as M,A as y}from"./AdminNavbar-CFcbAGb8.js";import{D as f}from"./download-k4wsHFQG.js";import{E as S}from"./eye-B4s1h9ML.js";import"./building-Dbe15So8.js";import"./sun-BB9LCqXH.js";import"./bell-Bt3n6wl1.js";function $(){var j,g,N,p;const[,i]=A(),[n,o]=m.useState(!1),[b,k]=m.useState("30d"),{stats:s,loading:w}=M();return m.useEffect(()=>{(async()=>{try{const l=await fetch("/api/auth/me");if(!l.ok){i("/login");return}(await l.json()).role!=="admin"&&i("/login")}catch{i("/login")}})()},[i]),w?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(y,{darkMode:n,onDarkModeToggle:()=>o(!n)}),e.jsx("div",{className:"pt-20 pb-8 px-4 max-w-7xl mx-auto",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),[1,2,3,4].map(a=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},a))]})})]}):e.jsxs("div",{className:`min-h-screen bg-gray-50 dark:bg-gray-900 ${n?"dark":""}`,children:[e.jsx(y,{darkMode:n,onDarkModeToggle:()=>o(!n)}),e.jsxs("div",{className:"pt-20 pb-8 px-4 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Analytics & Reports"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Detaillierte Plattform-Statistiken und Performance-Metriken"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:b,onChange:a=>k(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-800 dark:border-gray-600",children:[e.jsx("option",{value:"7d",children:"7 Tage"}),e.jsx("option",{value:"30d",children:"30 Tage"}),e.jsx("option",{value:"90d",children:"90 Tage"}),e.jsx("option",{value:"1y",children:"1 Jahr"})]}),e.jsxs(x,{className:"gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(r,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"w-8 h-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.totalUsers)||0}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gesamt Nutzer"}),e.jsx("div",{className:"text-xs text-green-600",children:"+12% vs. letzter Monat"})]})]})})}),e.jsx(r,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"w-8 h-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.totalLeads)||0}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Leads generiert"}),e.jsx("div",{className:"text-xs text-green-600",children:"+18% vs. letzter Monat"})]})]})})}),e.jsx(r,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{className:"w-8 h-8 text-purple-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["€",((j=s==null?void 0:s.monthlyRevenue)==null?void 0:j.toLocaleString())||"0"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monatlicher Umsatz"}),e.jsx("div",{className:"text-xs text-green-600",children:"+25% vs. letzter Monat"})]})]})})}),e.jsx(r,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{className:"w-8 h-8 text-orange-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(s==null?void 0:s.conversionRate)||0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Conversion Rate"}),e.jsx("div",{className:"text-xs text-green-600",children:"+3% vs. letzter Monat"})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(r,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5"}),"Nutzer-Wachstum"]})}),e.jsx(t,{children:e.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 dark:bg-gray-800 rounded",children:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Chart wird geladen..."})]})})})]}),e.jsxs(r,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"}),"Lead-Quellen"]})}),e.jsx(t,{children:e.jsx("div",{className:"space-y-4",children:(g=s==null?void 0:s.leadSourceBreakdown)==null?void 0:g.map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.source}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${a.count/80*100}%`}})}),e.jsx("span",{className:"text-sm font-medium",children:a.count})]})]},l))})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs(r,{children:[e.jsx(c,{children:e.jsx(d,{children:"Top Anbieter"})}),e.jsx(t,{children:e.jsx("div",{className:"space-y-3",children:(N=s==null?void 0:s.topPerformingAgencies)==null?void 0:N.slice(0,5).map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{variant:"outline",className:"w-6 h-6 p-0 flex items-center justify-center text-xs",children:l+1}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:a.name})]}),e.jsx(u,{variant:"default",children:a.trustScore})]},a.id))})})]}),e.jsxs(r,{children:[e.jsx(c,{children:e.jsx(d,{children:"Letzte Aktivitäten"})}),e.jsx(t,{children:e.jsx("div",{className:"space-y-3",children:(p=s==null?void 0:s.recentActivity)==null?void 0:p.slice(0,5).map((a,l)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-gray-900 dark:text-white",children:a.description}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:new Date(a.timestamp).toLocaleString("de-DE")})]},l))})})]}),e.jsxs(r,{children:[e.jsx(c,{children:e.jsx(d,{children:"Quick Actions"})}),e.jsxs(t,{className:"space-y-3",children:[e.jsxs(x,{variant:"outline",className:"w-full gap-2",onClick:()=>i("/admin/reports"),children:[e.jsx(S,{className:"w-4 h-4"}),"Detaillierte Reports"]}),e.jsxs(x,{variant:"outline",className:"w-full gap-2",onClick:()=>i("/admin/export"),children:[e.jsx(f,{className:"w-4 h-4"}),"Daten Export"]}),e.jsxs(x,{variant:"outline",className:"w-full gap-2",onClick:()=>i("/admin/dashboard"),children:[e.jsx(h,{className:"w-4 h-4"}),"Dashboard zurück"]})]})]})]}),e.jsxs(r,{children:[e.jsx(c,{children:e.jsx(d,{children:"Monatliche Performance"})}),e.jsx(t,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:"98.5%"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Kundenzufriedenheit"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:(s==null?void 0:s.averageTrustScore)||0}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ø Trust Score"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:"2.4h"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ø Response Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:"€1,250"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ø Deal Value"})]})]})})]})]})]})}export{$ as default};
